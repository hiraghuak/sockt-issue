var SaranyuHlsHTML5Player=SaranyuHlsHTML5Player||{};SaranyuHlsHTML5Player.version="0.0.1",SaranyuHlsHTML5Player.players=[],SaranyuHlsHTML5Player.PLUGIN_NAME="Saranyu HLS Video Player",SaranyuHlsHTML5Player.debug=!0,SaranyuHlsHTML5Player.inActivityTimeout=3e3,SaranyuHlsHTML5Player.googleImaSDKURL="//imasdk.googleapis.com/js/sdkloader/ima3.js",SaranyuHlsHTML5Player.googleImaSDKLoaded=!1,SaranyuHlsHTML5Player.maxNonLinearAdHeight=150,SaranyuHlsHTML5Player.bigPlayClickCounter=0,SaranyuHlsHTML5Player.bigPlayClickDELAY=350,SaranyuHlsHTML5Player.bigPlayClickCounterTimer,SaranyuHlsHTML5Player.defaultOptions={debug:"true",type:"video",autoplay:"true",videotitle:"",content:"vod",maintainaspect:"true",titleStrings:{pause:"Pause",play:"Play",replay:"Replay",fullscreenText:"Full Screen",unFullscreenText:"Exit Fullscreen",muteText:"Mute",unmuteText:"Unmute",socialShare:"Share",download:"Download",watchLater:"Watch Later",favourite:"Favourite",videotitle:"VideoTitle",swap:"Swap",guide:"Guide",like:"Like",record:"Record",stop:"Stop",light:"Light",playlist:"Playlist",multiaudio:"Default",subtitles:"OFF"}},SaranyuHlsHTML5Player.Utils={DLOG:function(){!SaranyuHlsHTML5Player.debug},secondsToTimeCode:function(t,e,o,l){"undefined"==typeof o?o=!1:"undefined"==typeof l&&(l=25);var a=Math.floor(t/3600)%24,n=Math.floor(t/60)%60,r=Math.floor(t%60),i=Math.floor((t%1*l).toFixed(3)),a=isNaN(a)?0:a;return n=isNaN(n)?0:n,r=isNaN(r)?0:r,result=(e||a>0?(10>a?"0"+a:a)+":":"")+(10>n?"0"+n:n)+":"+(10>r?"0"+r:r)+(o?":"+(10>i?"0"+i:i):""),result},timeCodeToSeconds:function(t,e,o,l){if("undefined"==typeof o?o=!1:"undefined"==typeof l&&(l=25),t)if(t){var a=t.split(":"),n=0;if(3==a.length){var r=Number(a[0]),i=Number(a[1]),s=Number(a[2]);n=60*r*60+60*i+s}else if(2==a.length){var i=Number(a[0]),s=Number(a[1]);n=60*i+s}}else var n=0;return n},getWidthInPercentage:function(t){var e=t.parent();return(t.width()/e.width()*100).toFixed(0)+"%"},getHeightInPercentage:function(t){var e=t.parent();return(t.height()/e.height()*100).toFixed(0)+"%"},preventSelectionOfTextInMouseMove:function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,t},getPercentageForGivenDuration:function(t,e){return t/e*100}},SaranyuHlsHTML5Player.MediaFeatures={init:function(){window.navigator,navigator.userAgent.toLowerCase()}},SaranyuHlsHTML5Player.MediaFeatures.init(),SaranyuHlsHTML5Player.MediaPlayer=function(t,e,o){SaranyuHlsHTML5Player.Utils.DLOG("Constructor",t,e);var l=this;l.masterElementid=t,l.options=e,l.playerType=o,l.$masterContainer=$(t),l._validateParams(e),l.init()},SaranyuHlsHTML5Player.MediaPlayer.prototype={_validateParams:function(t){t.type?(SaranyuHlsHTML5Player.Utils.DLOG("Media Type present. Check if its valid"),$.inArray(t.type,SaranyuHlsHTML5Player.MediaTypes)>-1?(SaranyuHlsHTML5Player.Utils.DLOG("Valid Media Types"),t.file?SaranyuHlsHTML5Player.Utils.DLOG("File Info Present"):SaranyuHlsHTML5Player.Utils.DLOG("File Information Not present")):SaranyuHlsHTML5Player.Utils.DLOG("Unknown Media Type")):SaranyuHlsHTML5Player.Utils.DLOG("Media Type Not present")},init:function(){var t=this;SaranyuHlsHTML5Player.Utils.DLOG("Init Function",t,t.options,t.$masterContainer),t.container=$('<div class="sp-main-container-wrapper"><div class="sp-main-container"><div class="sp-player-inner"><div class="sp-ad-container"></div><div class="sp-media-element"></div><div class="sp-player-layers"></div><div class="sp-full-controls"></div></div></div></div>').appendTo(t.$masterContainer),t.mainContainerWrapper=t.container.find(".sp-main-container-wrapper"),t.mainContainer=t.container.find(".sp-main-container"),t.playerInner=t.container.find(".sp-player-inner"),t.adContainer=t.container.find(".sp-ad-container"),t.mediaElement=t.container.find(".sp-media-element"),t.playerLayers=t.container.find(".sp-player-layers"),t.fullControls=t.container.find(".sp-full-controls"),t._createMediaElement(),t._createFullControls(),t._createIndividualControls(),t._createAndAppendHLStoPlayer(t.options.file[0]),t._hideControlsUnderInactivity(),t._createCustomContextmenu()},_createMediaElement:function(){SaranyuHlsHTML5Player.Utils.DLOG("_createMediaElement function being called");var t=this,e=t.mediaElement,o="<video></video>";navigator.userAgent||navigator.vendor||window.opera;e.append(o),t.mediaElement.videoElement=e.find("video")[0]},_createFullControls:function(){var t=this,e='<div class="sp-controls-top"></div>';t.fullControls.append(e),t.fullControls.topContolbar=t.fullControls.find(".sp-controls-top");var o='<div class="sp-controls-bottom"></div>';t.fullControls.append(o),t.fullControls.bottomControlBar=t.fullControls.find(".sp-controls-bottom");var l='<div class="sp-controls-bottom-progress-bar"></div>';t.fullControls.bottomControlBar.append(l),t.fullControls.bottomControlBar.bottomProgressBar=t.fullControls.find(".sp-controls-bottom-progress-bar");var a='<div class="sp-controls-bottom-plyr-controls"></div>';t.fullControls.bottomControlBar.append(a),t.fullControls.bottomControlBar.bottomPlayerControls=t.fullControls.find(".sp-controls-bottom-plyr-controls"),t._createFullControls.hideFullControls=function(){t.fullControls.hide();try{t._buildadvertisement.initializeAd.adStarted&&!t._buildadvertisement.initializeAd.isLinear&&t.adContainer.removeClass("sp-playlist-show")}catch(e){}t.playerLayers.addClass("hide-cursor")},t._createFullControls.showFullControls=function(){t.fullControls.show(),t.playerLayers.removeClass("hide-cursor");try{if(t.fullControls.playlistPanel.is(":visible"))try{t._buildadvertisement.initializeAd.adStarted&&!t._buildadvertisement.initializeAd.isLinear&&t.adContainer.addClass("sp-playlist-show")}catch(e){}}catch(e){}try{var o=t.mediaElement.videoElement,l=o.currentTime/o.duration;t._buildprogressbar.adjustCurrentAndHandleInSeek(l)}catch(e){}}},_createIndividualControls:function(){SaranyuHlsHTML5Player.Utils.DLOG("_createcontrols function being called");var t=this,e=t.options.features;SaranyuHlsHTML5Player.Utils.DLOG("options pass is "+e);for(featureIndex in e)feature=e[featureIndex],t["_build"+feature]&&t["_build"+feature]()},_createAndAppendHLStoPlayer:function(t){var e=this,o=e.mediaElement.videoElement,l=t.content_url,a=e.options;e.mediaElement.videoElement.hlsObj&&e.mediaElement.videoElement.hlsObj.destroy(),e._createAndAppendHLStoPlayer._attachHLStoVideo=function(){Hls.isSupported()?(e.mediaElement.videoElement.saranyuHlsMertics={},e.mediaElement.videoElement.saranyuHlsMertics.playbackRateOld=o.playbackRate,e.mediaElement.videoElement.hlsObj=new Hls,e.mediaElement.videoElement.hlsObj.loadSource(l),e.mediaElement.videoElement.hlsObj.attachMedia(o),e.mediaElement.videoElement.mediaId=t.mediaid,o.playbackRate=e.mediaElement.videoElement.saranyuHlsMertics.playbackRateOld,e.mediaElement.videoElement.hlsObj.on(Hls.Events.MANIFEST_PARSED,function(){if("true"===a.autoplay||a.autoplay===!0){console.log("hls manifest parsed so play now");var t=Number(a.seekonload);t>0?(e.mediaElement.videoElement.hlsObj.seekOnLoad=function(){setTimeout(function(){e._videoPlayerControls("seek",t),e.mediaElement.videoElement.removeEventListener("loadeddata",e.mediaElement.videoElement.hlsObj.seekOnLoad)}.bind(e),2e3)},e.mediaElement.videoElement.addEventListener("loadeddata",e.mediaElement.videoElement.hlsObj.seekOnLoad)):(o.play(),e._hideControlsUnderInactivityFirstLaunch())}else e.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.addClass("sp-pause"),e.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-play"),e.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-replay"),e.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.play);e.options.features.includes("qualityswitch")&&e._buildqualityswitch._buildQualityPopup(e.mediaElement.videoElement.hlsObj.levels)}),e.mediaElement.videoElement.hlsObj.on(Hls.Events.AUDIO_TRACKS_UPDATED,function(t,o){e.options.features.includes("multiaudio")&&e._buildmultiaudio._buildMultiaudioPopup(e.mediaElement.videoElement.hlsObj.audioTracks)}),e.mediaElement.videoElement.hlsObj.on(Hls.Events.LEVEL_LOADED,function(t,o){e.mediaElement.videoElement.saranyuHlsMertics=o.details,e.mediaElement.videoElement.saranyuHlsMertics.islive=o.details.live})):SaranyuHlsHTML5Player.Utils.DLOG("MSE (Media Source Extension) is not supported in Your Browser")},!e._isSupportedMSE()&&e._checkHLS()?(e.mediaElement.videoElement.src=l,e.mediaElement.videoElement.mediaId=t.mediaid,o.play()):"mp4"==e.playerType?(e.mediaElement.videoElement.src=l,e.mediaElement.videoElement.mediaId=t.mediaid,o.play()):e._createAndAppendHLStoPlayer._attachHLStoVideo();try{e.fullControls.topContolbar.videoTitle.changeTitle(t.videotitle)}catch(n){}try{e.playerLayers.poster.changePoster(t.poster)}catch(n){}e.options.features.includes("subtitles")&&e._buildsubtitles._buildSubtitlesPopup(),e.playerInner.trigger("mousemove")},_hideControlsUnderInactivityFirstLaunch:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching logic of hiding controls when there is no user interactivity");var t=this,e=t.mediaElement.videoElement;t.counterToCheckInActivity,t._createFullControls.showFullControls(),clearTimeout(t.counterToCheckInActivity),"true"==t.options.hideControlsWhenInactive&&(t.counterToCheckInActivity=setTimeout(function(){t.fullControls.is(":visible")&&!e.paused&&(t._createFullControls.hideFullControls(),SaranyuHlsHTML5Player.Utils.DLOG("hiding controls because there is no user activity from "+SaranyuHlsHTML5Player.inActivityTimeout+" ms"))},SaranyuHlsHTML5Player.inActivityTimeout))},_hideControlsUnderInactivity:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching logic of hiding controls when there is no user interactivity");var t=this,e=t.mediaElement.videoElement;t.counterToCheckInActivity,t.playerInner.on("mousemove mouseenter mouseover",function(o){t._createFullControls.showFullControls(),clearTimeout(t.counterToCheckInActivity),"true"==t.options.hideControlsWhenInactive&&(t.counterToCheckInActivity=setTimeout(function(){t.fullControls.is(":visible")&&!e.paused&&(t._createFullControls.hideFullControls(),SaranyuHlsHTML5Player.Utils.DLOG("hiding controls because there is no user activity from "+SaranyuHlsHTML5Player.inActivityTimeout+" ms"))},SaranyuHlsHTML5Player.inActivityTimeout))}.bind(t,e))},_createCustomContextmenu:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching custom context menu");var t=this;t.playerInner.contextmenu(function(t){t.preventDefault(),SaranyuHlsHTML5Player.Utils.DLOG("Right Clicked on player")})},_buildplaypause:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching play pause icon");var t=this,e=t.mediaElement.videoElement,o='<div class="sp-button sp-play-pause sp-play"><span class="tooltiptext"></span><button class="sp-play-pause-btn"></button></div>';t.fullControls.bottomControlBar.bottomPlayerControls.append(o),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-button.sp-play-pause.sp-play"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.tooltip=t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.find(".tooltiptext"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.click(function(o){SaranyuHlsHTML5Player.Utils.DLOG("Clicked on Play Pause Icon"),o.preventDefault(),e.paused?t._videoPlayerControls("play"):t._videoPlayerControls("pause"),e.ended&&t._videoPlayerControls("seek",0),document.activeElement.blur(),e.focus()}),e.addEventListener("play",function(){try{SaranyuHlsHTML5Player.Utils.DLOG("Play triggered"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.addClass("sp-play"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-pause"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-replay"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.pause)}catch(e){}},!1),e.addEventListener("pause",function(){try{SaranyuHlsHTML5Player.Utils.DLOG("Pause triggered"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.addClass("sp-pause"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-play"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-replay"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.play)}catch(e){}},!1),e.addEventListener("playing",function(){try{SaranyuHlsHTML5Player.Utils.DLOG("Playing triggered"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.addClass("sp-play"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-pause"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-replay"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.pause)}catch(e){}},!1),e.addEventListener("ended",function(){try{SaranyuHlsHTML5Player.Utils.DLOG("Re-Play triggered"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.addClass("sp-replay"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-play"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-pause"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.replay),t._createFullControls.showFullControls();var e=t.options.features;for(featureIndex in e)"relatedvideo"==e[featureIndex]&&(t.options.autoplay=!1,t.fullControls.relatedPanel.show())}catch(o){}},!1)},_buildvolume:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching volume icon and volume seekbar");var t=this,e=t.mediaElement.videoElement,o=t.options,l='<div class="sp-button sp-volume-btn-wrap sp-unmute"><span class="tooltiptext">'+SaranyuHlsHTML5Player.defaultOptions.titleStrings.muteText+'</span><button class="sp-volume-btn"></button></div>';t.fullControls.bottomControlBar.bottomPlayerControls.append(l),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-button.sp-volume-btn-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.tooltip=t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.find(".tooltiptext");var a='<div class="sp-volume-slider sp-volume-slider-wrap"><div class="sp-volume-current"></div><div class="sp-volume-handle"><span class="tooltiptext"></span></div></div>';t.fullControls.bottomControlBar.bottomPlayerControls.append(a),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-volume-slider.sp-volume-slider-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeCurrent=t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.find(".sp-volume-current"),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeHandle=t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.find(".sp-volume-handle"),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeHandle.tooltip=t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeHandle.find(".tooltiptext"),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.writeToVolumeHandleTooltip=function(){t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeHandle.tooltip.html(SaranyuHlsHTML5Player.Utils.getWidthInPercentage(t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeCurrent))},t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.positionVolumeHandle=function(e){t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeCurrent.css("width",100*e+"%"),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeHandle.css("left","calc("+100*e+"% - "+t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeHandle.width()/2+"px)"),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.writeToVolumeHandleTooltip()},t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.handleVolumeMove=function(e){var o=null,l=t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider,a=l.offset(),n=l.width(),r=e.pageX-a.left;o=r/n,o=Math.max(0,o),o=Math.min(o,1),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.positionVolumeHandle(o),t._videoPlayerControls("volumechange",o)},t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.writeToVolumeHandleTooltip(),e.addEventListener("volumechange",function(){try{SaranyuHlsHTML5Player.Utils.DLOG("volume change triggered"),e.muted?(t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.addClass("sp-mute"),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.removeClass("sp-unmute"),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.unmuteText),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.writeToVolumeHandleTooltip()):(t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.addClass("sp-unmute"),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.removeClass("sp-mute"),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.muteText),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.show(),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.writeToVolumeHandleTooltip())}catch(o){}},!1),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.click(function(o){SaranyuHlsHTML5Player.Utils.DLOG("Clicked on voluem button"),o.preventDefault(),e.muted?t._videoPlayerControls("unmute"):t._videoPlayerControls("mute")}),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.bind("mouseover",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.mouseIsOver=!0}).bind("mousemove",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.playerInner.trigger("mousemove"),1==t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.mouseIsDown&&t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.handleVolumeMove(e)}).bind("mouseup",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.mouseIsDown=!1}).bind("mousedown",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.handleVolumeMove(e),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.mouseIsDown=!0}).bind("mouseleave",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.mouseIsDown=!1}),("true"===o.mute||1==o.mute)&&(t._videoPlayerControls("mute"),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.addClass("sp-mute"),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.removeClass("sp-unmute"),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.unmuteText),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.hide()),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.addClass("firefox")},_buildprogressbar:function(){function t(t){var e,o=a.fullControls.bottomControlBar.bottomProgressBar.progressbar,l=o.offset(),r=o.width(),i=t.pageX-l.left;percentage=i/r;var s=100*percentage+"%";if(e=percentage*n.duration,0>e||e>n.duration||isNaN(e))return void a.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.show();a.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.html(SaranyuHlsHTML5Player.Utils.secondsToTimeCode(e)),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.css("left",s),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.show();var d,u,m,p,b=0;if(d=a.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.offset().left,u=a.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.outerWidth(),m=a.fullControls.bottomControlBar.bottomProgressBar.progressbar.offset().left,p=a.fullControls.bottomControlBar.bottomProgressBar.progressbar.outerWidth(),u+d>m+p){var C;C=p-u,b=C,a.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.css("left",b+"px"),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.show()}try{if(a.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.parseAndCalculateCordinates.thumbnailsMetaData){a.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.renderingThumbnailPreview(e),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.css("left",s),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.show();var y,c,v=0;if(y=a.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.offset().left,c=a.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.outerWidth(),c+y>m+p){var f;f=p-c,v=f,a.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.css("left",v+"px"),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.show()}}}catch(t){}}function e(){a.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.hide(),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.hide()}function o(e){var o,l=a.fullControls.bottomControlBar.bottomProgressBar.progressbar,r=l.offset(),i=l.width(),s=e.pageX-r.left;percentage=s/i,o=percentage*n.duration,0>o||o>n.duration||isNaN(o)||(n.ended&&n.paused&&(a.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.addClass("sp-pause"),a.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-play"),a.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-replay"),a.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.play),a.playerLayers.bigreplay.hide(),a.playerLayers.bigplay.show()),a._videoPlayerControls("seek",o),a._buildprogressbar.adjustCurrentAndHandleInSeek(percentage),t(e))}function l(t){a.fullControls.bottomControlBar.bottomProgressBar.progressbar.loaded.width(100*t+"%")}SaranyuHlsHTML5Player.Utils.DLOG("Attaching progressbar");var a=this,n=a.mediaElement.videoElement,r='<div class="sp-progress-bar-time-rail"><span class="sp-progress-bar-buffering"></span><span class="sp-progress-bar-loaded"></span><span class="sp-progress-bar-current"></span><span class="sp-progress-bar-cues"></span><span class="sp-progress-bar-handle"></span><span class="sp-progress-bar-timefloat"></span><span class="sp-progress-bar-seekbar-preview"></span></div>';a.fullControls.bottomControlBar.bottomProgressBar.append(r),a.fullControls.bottomControlBar.bottomProgressBar.progressbar=a.fullControls.bottomControlBar.bottomProgressBar.find(".sp-progress-bar-time-rail"),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.buffering=a.fullControls.bottomControlBar.bottomProgressBar.find(".sp-progress-bar-buffering"),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.loaded=a.fullControls.bottomControlBar.bottomProgressBar.find(".sp-progress-bar-loaded"),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.current=a.fullControls.bottomControlBar.bottomProgressBar.find(".sp-progress-bar-current"),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle=a.fullControls.bottomControlBar.bottomProgressBar.find(".sp-progress-bar-handle"),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat=a.fullControls.bottomControlBar.bottomProgressBar.find(".sp-progress-bar-timefloat"),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer=a.fullControls.bottomControlBar.bottomProgressBar.find(".sp-progress-bar-seekbar-preview"),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.cues=a.fullControls.bottomControlBar.bottomProgressBar.find(".sp-progress-bar-cues"),a._buildprogressbar.adjustCurrentAndHandleInSeek=function(t){if(!(0>t||t>1)){var e=100*t+"%",o=a.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.width()/2;a.fullControls.bottomControlBar.bottomProgressBar.progressbar.current.width(e),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.css("left","calc("+e+" - "+o+"px)");var l,n,r,i,s=0;if(l=a.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.offset().left,n=a.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.width(),r=a.fullControls.bottomControlBar.bottomProgressBar.progressbar.offset().left,i=a.fullControls.bottomControlBar.bottomProgressBar.progressbar.width(),r>l){var d=0;a.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.css("left",d+"px")}else if(n+l>r+i){var d;d=i-n,s=d,o=a.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.width(),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.css("left","calc("+e+" - "+o+"px)")}}},a.fullControls.bottomControlBar.bottomProgressBar.progressbar.bind("mouseover",function(e){t(e),e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.mouseIsOver=!0}).bind("mousemove",function(e){t(e),e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),1==a.fullControls.bottomControlBar.bottomProgressBar.progressbar.mouseIsDown&&o(e)}).bind("mouseup",function(t){t=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(t),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.mouseIsDown=!1}).bind("mousedown",function(t){t=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(t),o(t),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.mouseIsDown=!0}).bind("mouseleave",function(t){e(),t=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(t),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.mouseIsDown=!1}),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.saranyuHammer({drag_max_touches:0}).on("touch drag",function(e){var l=e.gesture.touches;e.gesture.preventDefault(),t(e);for(var n=0,r=l.length;r>n;n++)a.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.mouseIsDown=!0,o(l[n])}).on("release",function(t){o(t),a.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.mouseIsDown=!1,e()}).on("mouseleave",function(t){a.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.mouseIsDown=!1}),n.addEventListener("timeupdate",function(t){var e=a.mediaElement.videoElement,o=e.currentTime/e.duration;a._buildprogressbar.adjustCurrentAndHandleInSeek(o)}.bind(a)),n.addEventListener("progress",function(t){for(var e,o=a.mediaElement.videoElement,n=0,r=0;r<o.buffered.length;r++)o.currentTime>=o.buffered.start(r)&&o.currentTime<=o.buffered.end(r)&&(e=o.buffered.end(r),n=e/o.duration);l(n)}.bind(a))},_buildseekbarpreview:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching seekbar preview");var t=this,e='<img class="sp-progress-bar-seekbar-preview-img" />';t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.append(e),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.seekbarPreviewContainerImgTag=t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.find(".sp-progress-bar-seekbar-preview-img"),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.parseAndCalculateCordinates=function(e){if(t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.parseAndCalculateCordinates.thumbnailsMetaData=[],""!=e){var o=e.split("\n\r\n");o.length<=1&&(o=e.split("\n\n")),$.each(o,function(e,l){var a,n,r,i,s,d,u,m=o[e].split("\n");if(void 0!=m[0]&&""!=m[0]&&"webvtt"!=m[0].toLowerCase()){var p=m[0].split("-->");a=SaranyuHlsHTML5Player.Utils.timeCodeToSeconds(p[0]),n=SaranyuHlsHTML5Player.Utils.timeCodeToSeconds(p[1])}if(void 0!=m[1]&&""!=m[1]&&"webvtt"!=m[1].toLowerCase()){var b=m[1].split("#");u=b[0];var C=b[1].split("="),y=C[1].split(",");s="-"+y[0]+"px",d="-"+y[1]+"px",i=y[2]+"px",r=y[3]+"px";var c={startTime:a,endTime:n,imgxPos:s,imgyPos:d,imgHeight:r,imgWidth:i,imgSrc:u};t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.parseAndCalculateCordinates.thumbnailsMetaData.push(c)}})}},t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.ajaxForVtt=function(e){t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.ajaxForVtt.abort=function(){t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.ajax.abort()};try{t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.ajaxForVtt.abort()}catch(o){}t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.ajax=$.ajax({type:"GET",url:e}).done(function(e){t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.parseAndCalculateCordinates(e)}.bind(t))},t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.renderingThumbnailPreview=function(e){t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.parseAndCalculateCordinates.thumbnailsMetaData.length>1&&$.each(t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.parseAndCalculateCordinates.thumbnailsMetaData,function(o,l){e>=l.startTime&&e<=l.endTime&&($(t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.seekbarPreviewContainerImgTag).attr("src",l.imgSrc),$(t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.seekbarPreviewContainerImgTag).css("height",l.imgHeight),$(t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.seekbarPreviewContainerImgTag).css("width",l.imgWidth),$(t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.seekbarPreviewContainerImgTag).css("object-position",l.imgxPos+" "+l.imgyPos))})},t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.ajaxForVtt(t.options.file[0].thumbnails)},_buildfullscreen:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching fullscreen icon");var t=this;t.isFullScreen=!1;var e='<div class="sp-button sp-fullscreen-unfullscreen sp-fullscreen"><span class="tooltiptext">'+SaranyuHlsHTML5Player.defaultOptions.titleStrings.fullscreenText+'</span><button class="sp-fullscreen-btn"></button></div>';t.fullControls.bottomControlBar.bottomPlayerControls.append(e),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-button.sp-fullscreen-unfullscreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.tooltip=t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.find(".tooltiptext"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.fullScreenChanges=function(){
t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.addClass("sp-unfullscreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.removeClass("sp-fullscreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.unFullscreenText)},t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.unFullScreenChanges=function(){t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.addClass("sp-fullscreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.removeClass("sp-unfullscreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.fullscreenText),t.playerInner.trigger("mousemove")},t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.launchIntoFullscreen=function(){var e=t.playerInner[0];e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()},t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.exitFullscreen=function(t){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.toggleFullscreen=function(){t.isFullScreen?(SaranyuHlsHTML5Player.Utils.DLOG("Exit FullScreen Mode"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.exitFullscreen(),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.unFullScreenChanges(),t.playerInner.removeClass("sp-is-fullscreen"),t.isFullScreen=!1):(SaranyuHlsHTML5Player.Utils.DLOG("FullScreen Mode"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.launchIntoFullscreen(),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.fullScreenChanges(),t.playerInner.addClass("sp-is-fullscreen"),t.isFullScreen=!0)},t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.click(function(e){e.preventDefault(),SaranyuHlsHTML5Player.Utils.DLOG("Clicked on FullScreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.toggleFullscreen()}),t.playerInner.keyup(function(e){var o=e.keyCode;27==o&&setTimeout(function(){t.isFullScreen&&(t.isFullScreen=!1,t.playerInner.removeClass("sp-is-fullscreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.unFullScreenChanges())}.bind(t),500)})},_buildclosebtn:function(){console.log("closeBtn..."),SaranyuHlsHTML5Player.Utils.DLOG("Attaching close icon");var t=this,e=t.mediaElement.videoElement,o='<div class="sp-close-button"><span class="tooltiptext"></span><button class="sp-close-btn"></button></div>';t.fullControls.bottomControlBar.bottomPlayerControls.append(o),t.fullControls.bottomControlBar.bottomPlayerControls.closeBtn=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-close-button .sp-close-btn"),t.fullControls.bottomControlBar.bottomPlayerControls.closeBtn.tooltip=t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.find(".tooltiptext"),t.fullControls.bottomControlBar.bottomPlayerControls.closeBtn.click(function(t){console.log("close button clicked"),SaranyuHlsHTML5Player.Utils.DLOG("Clicked on close Icon"),t.preventDefault(),document.getElementById("video_player").remove(),document.activeElement.blur(),e.focus()})},_buildtime:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching time");var t=this,e=t.mediaElement.videoElement,o='<div class="sp-player-time"><span class="sp-plyr-currenttime">00:00</span>&nbsp;/&nbsp;<span class="sp-plyr-duration">00:00</span></div>';t.fullControls.bottomControlBar.bottomPlayerControls.append(o),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlayerTime=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-player-time"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlayerTime.currentTime=t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlayerTime.find(".sp-plyr-currenttime"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlayerTime.duration=t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlayerTime.find(".sp-plyr-duration"),e.addEventListener("timeupdate",function(o){t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlayerTime.currentTime.html(SaranyuHlsHTML5Player.Utils.secondsToTimeCode(e.currentTime)),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlayerTime.duration.html(SaranyuHlsHTML5Player.Utils.secondsToTimeCode(e.duration))}.bind(t)),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlayerTime.addClass("firefox")},_buildlogo:function(){console.log("Attaching logo");var t=this,e=(t.mediaElement.videoElement,t.options,'<div class="sp-logo-switch sp-logo-switch-wrap"><button class="sp-logo-switch-btn"></button><div class="sp-logo-switch-wrap sp-logo-switch-popup-wrap"></div></div>');t.fullControls.bottomControlBar.bottomPlayerControls.append(e),t.fullControls.bottomControlBar.bottomPlayerControls.logo=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-logo-switch-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.logo.button=t.fullControls.bottomControlBar.bottomPlayerControls.logo.find(".sp-logo-switch-btn")},_buildnxplayback:function(){function t(t){t.find("button").unbind().click(function(t){var o=$(t.target).attr("speed"),l=$(t.target).attr("label"),a=e.mediaElement.videoElement;a.playbackRate=o,1==o?a.muted=!1:a.muted=!0,$(t.target).parent().parent().find(".active").removeClass("active").addClass("inactive"),$(t.target).addClass("active").removeClass("inactive"),e.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.button.html(l),e.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.popup.hide(),SaranyuHlsHTML5Player.Utils.DLOG("video playback speed changed to "+o+"x or label "+l)}.bind(e))}SaranyuHlsHTML5Player.Utils.DLOG("Attaching nxplayback");var e=this,o=e.mediaElement.videoElement,l=e.options,a='<div class="sp-nxplayback-switch sp-nxplayback-switch-wrap"><button class="sp-nxplayback-switch-btn"></button><div class="sp-nxplayback-switch-wrap sp-nxplayback-switch-popup-wrap"></div></div>';e.fullControls.bottomControlBar.bottomPlayerControls.append(a),e.fullControls.bottomControlBar.bottomPlayerControls.nxplayback=e.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-nxplayback-switch-wrap"),e.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.button=e.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.find(".sp-nxplayback-switch-btn"),e.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.popup=e.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.find(".sp-nxplayback-switch-popup-wrap"),$.each(l.nxplayback,function(l,a){var n,r;"true"===a["default"].toLowerCase()||1==a["default"]?(e.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.button.html(a.label),o.playbackRate=a.speed,r="active"):r="inactive",n="<div><button class="+r+" type='button' label="+a.label+" speed="+a.speed+">"+a.label+"</button></div>",t(e.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.popup.append(n))}),e.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.button.unbind().click(function(t){e.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.popup.toggle(),e.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.hide(),e.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.hide(),e.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.hide(),e.fullControls.playlistPanel.hide()}.bind(e))},_buildqualityswitch:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching qualityswitch");var t=this,e=(t.mediaElement.videoElement,t.options,'<div class="sp-quality-switch sp-quality-switch-wrap"><button class="sp-quality-switch-btn"></button><div class="sp-quality-switch-wrap sp-quality-switch-popup-wrap"></div></div>');t.fullControls.bottomControlBar.bottomPlayerControls.append(e),t.fullControls.bottomControlBar.bottomPlayerControls.quality=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-quality-switch-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.quality.button=t.fullControls.bottomControlBar.bottomPlayerControls.quality.find(".sp-quality-switch-btn"),t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup=t.fullControls.bottomControlBar.bottomPlayerControls.quality.find(".sp-quality-switch-popup-wrap"),t._buildqualityswitch._buildQualityPopup=function(e){function o(e){e.find("button").unbind().click(function(e){var o=Number($(e.target).attr("index")),l=$(e.target).html();t.mediaElement.videoElement;t.mediaElement.videoElement.hlsObj.currentLevel=o,$(e.target).parent().parent().find(".active").removeClass("active").addClass("inactive"),$(e.target).addClass("active").removeClass("inactive"),t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.hide(),SaranyuHlsHTML5Player.Utils.DLOG("quality index changed to "+o+"x or label "+l)}.bind(t))}if(t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.empty(),SaranyuHlsHTML5Player.Utils.DLOG("Attaching qualityswitch popup elements"),e.length>1)$.each(e,function(e,l){SaranyuHlsHTML5Player.Utils.DLOG("Attaching quality switching with bit rate of "+(l.bitrate/1024).toFixed(0)+" Kbps");var a="",n="inactive",r="active",i=-1,s=t.options.qualityswitch.label,d=(l.bitrate/1024).toFixed(0),u=l.height+"p";t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.children().length||(classActiveOrInactive="active",a="<div><button class="+r+" type='button' label="+s+" index="+i+">"+s+"</button></div>"),"resolution"==t.options.qualityswitch.metric?a+="<div><button class="+n+" type='button' label="+d+" index="+e+">"+u+"</button></div>":"bitrate"==t.options.qualityswitch.metric&&(a+="<div><button class="+n+" type='button' label="+d+" index="+e+">"+d+" kbps</button></div>"),o(t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.append(a))});else{SaranyuHlsHTML5Player.Utils.DLOG("Attaching quality switching Auto only , if there is just one quality");var l="",a="active",n=-1,r=t.options.qualityswitch.label;classActiveOrInactive="active",l="<div><button class="+a+" type='button' label="+r+" index="+n+">"+r+"</button></div>",o(t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.append(l))}},t.fullControls.bottomControlBar.bottomPlayerControls.quality.button.unbind().click(function(e){try{t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.children().length>0?(t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.toggle(),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.hide(),t.fullControls.playlistPanel.hide()):t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.hide()}catch(o){}}.bind(t))},_buildmultiaudio:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching multiaudio tracks");var t=this,e=(t.mediaElement.videoElement,t.options,""),o='<div class="sp-multiaudio-switch sp-multiaudio-switch-wrap"><button class="sp-multiaudio-switch-btn"></button><div class="sp-multiaudio-switch-wrap sp-multiaudio-switch-popup-wrap"></div></div>';t.fullControls.bottomControlBar.bottomPlayerControls.append(o),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-multiaudio-switch-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.button=t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.find(".sp-multiaudio-switch-btn"),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup=t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.find(".sp-multiaudio-switch-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.button.html(e),t._buildmultiaudio._buildMultiaudioPopup=function(e){function o(e){e.find("button").unbind().click(function(e){var o=Number($(e.target).attr("index")),l=$(e.target).html();t.mediaElement.videoElement;t.mediaElement.videoElement.hlsObj.audioTrack=o,$(e.target).parent().parent().find(".active").removeClass("active").addClass("inactive"),$(e.target).addClass("active").removeClass("inactive"),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.hide(),SaranyuHlsHTML5Player.Utils.DLOG("multiaudio index changed to "+o+"x or label "+l)}.bind(t))}if(t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.empty(),SaranyuHlsHTML5Player.Utils.DLOG("Attaching multiaudio popup elements"),e.length>1){var l=e[0].groupId;$.each(e,function(e,a){SaranyuHlsHTML5Player.Utils.DLOG("Attaching multiaudio switching with name of "+a.name);var n="",r="inactive",i="active",s=0,d=SaranyuHlsHTML5Player.defaultOptions.titleStrings.multiaudio,u=a.name;a.groupId==l&&(t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.children().length||(classActiveOrInactive="active",n="<div><button class="+i+" type='button' label="+d+" index="+s+">"+d+"</button></div>"),n+="<div><button class="+r+" type='button' label="+u+" index="+e+">"+u+"</button></div>",o(t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.append(n)))})}},t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.button.unbind().click(function(e){if(t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.children().length>0){try{t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.toggle()}catch(o){}try{t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.toggle()}catch(o){}try{t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.hide()}catch(o){}try{t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.popup.hide()}catch(o){}try{t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.hide()}catch(o){}try{t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.hide()}catch(o){}try{t.fullControls.playlistPanel.hide()}catch(o){}}else t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.hide()}.bind(t))},_buildsubtitles:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching subtitles tracks");var t=this,e=(t.mediaElement.videoElement,t.options,'<div class="sp-subtitles-switch sp-subtitles-switch-wrap"><button class="sp-subtitles-switch-btn"></button><div class="sp-subtitles-switch-wrap sp-subtitles-switch-popup-wrap"></div></div>');t.fullControls.bottomControlBar.bottomPlayerControls.append(e),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-subtitles-switch-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.button=t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.find(".sp-subtitles-switch-btn"),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup=t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.find(".sp-subtitles-switch-wrap");var o='<div class="sp-subtitles-panel"></div>';t.mediaElement.append(o),t.mediaElement.subtitlesPanel=t.mediaElement.find(".sp-subtitles-panel"),t.mediaElement.subtitlesPanel.subtitlesArray=[],t._buildsubtitles.hideSubTitlesContainer=function(){t.mediaElement.subtitlesPanel.hide()},t._buildsubtitles.showSubTitlesContainer=function(){t.mediaElement.subtitlesPanel.html().length>1?t.mediaElement.subtitlesPanel.show():t.mediaElement.subtitlesPanel.hide()},t._buildsubtitles.hideSubTitlesContainer(),t._buildsubtitles._buildSubtitlesPopup=function(e){function o(e){return SaranyuHlsHTML5Player.Utils.DLOG(e+" uday 2 Check playlist index for subtitles "+a),isNaN(e)?(t.mediaElement.subtitlesPanel.subtitlesArray=[],!1):(t.mediaElement.subtitlesPanel.subtitlesArray=[],void $.ajax({url:t.options.file[a].subtitles[e].file,context:t,success:function(t){function e(t){return t.replace(/^\s+|\s+$/g,"")}var o=this,l=t.replace(/\r\n|\r|\n/g,"\n");l=e(l);var a=l.split("\n\n"),n=0;for(s in a){var r=a[s].split("\n");if(r.length>=2){var i=r[0],d=e(r[1].split(" --> ")[0]),u=e(r[1].split(" --> ")[1]),m=r[2];if(r.length>2)for(j=3;j<r.length;j++)m+="\n"+r[j];o.mediaElement.subtitlesPanel.subtitlesArray[n]={},o.mediaElement.subtitlesPanel.subtitlesArray[n].number=i,o.mediaElement.subtitlesPanel.subtitlesArray[n].start=d,o.mediaElement.subtitlesPanel.subtitlesArray[n].end=u,o.mediaElement.subtitlesPanel.subtitlesArray[n].text=m}n++}}}))}function l(e){e.find("button").unbind().click(function(e){var l=Number($(e.target).attr("index")),a=$(e.target).html();t.mediaElement.videoElement;o(l),$(e.target).parent().parent().find(".active").removeClass("active").addClass("inactive"),$(e.target).addClass("active").removeClass("inactive"),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.hide(),SaranyuHlsHTML5Player.Utils.DLOG("subtitles index changed to "+l+"x or label "+a)}.bind(t))}var a=0;if("undefined"!=typeof t.fullControls.playlistPanel&&(a=t.fullControls.playlistPanel.playingIndex),SaranyuHlsHTML5Player.Utils.DLOG("Check playlist index for subtitles"+a),console.log("Check playlist index for subtitles"+a+t.options.file[a].subtitles),e=t.options.file[a].subtitles,t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.empty(),SaranyuHlsHTML5Player.Utils.DLOG("Attaching subtitles popup elements"+t.mediaElement.subtitlesPanel.subtitlesArray.length),t.mediaElement.subtitlesPanel.subtitlesArray=[],SaranyuHlsHTML5Player.Utils.DLOG("check subtitle length"+t.mediaElement.subtitlesPanel.subtitlesArray.length),void 0!=e)"string"==typeof e[0].file&&$.each(e,function(e,o){SaranyuHlsHTML5Player.Utils.DLOG("Attaching subtitles switching with name of "+o.lang);var a="",n="inactive",r="active",i="no",s=SaranyuHlsHTML5Player.defaultOptions.titleStrings.subtitles,d=o.lang;t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.children().length||(classActiveOrInactive="active",a="<div><button class="+r+" type='button' label="+s+" index="+i+">"+s+"</button></div>"),a+="<div><button class="+n+" type='button' label="+d+" index="+e+">"+d+"</button></div>",l(t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.append(a))});else{SaranyuHlsHTML5Player.Utils.DLOG("Attaching multiaudio switching Auto only , if there is just one audio");var n="",r="active",i="no",d=SaranyuHlsHTML5Player.defaultOptions.titleStrings.subtitles;classActiveOrInactive="active",n="<div><button class="+r+" type='button' label="+d+" index="+i+">"+d+"</button></div>",l(t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.append(n))}},t.mediaElement.videoElement.addEventListener("timeupdate",function(){function e(t){var e=t,o=e.split(":"),l=60*+o[0]*60+60*+o[1]+ +o[2];return l}!function(){var o=Math.floor(Number(t.mediaElement.videoElement.currentTime));if(t.mediaElement.subtitlesPanel.subtitlesArray.length>0)for(var l=0;l<t.mediaElement.subtitlesPanel.subtitlesArray.length;l++){var a=e(t.mediaElement.subtitlesPanel.subtitlesArray[l].start.split(",")[0]),n=e(t.mediaElement.subtitlesPanel.subtitlesArray[l].end.split(",")[0]);if(o>=a&&n>=o)return t._buildsubtitles.showSubTitlesContainer(),void t.mediaElement.subtitlesPanel.html(t.mediaElement.subtitlesPanel.subtitlesArray[l].text)}t._buildsubtitles.hideSubTitlesContainer()}()}),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.button.unbind().click(function(e){try{t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.children().length>0?(t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.toggle(),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.hide(),t.fullControls.playlistPanel.hide()):t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.hide()}catch(o){}}.bind(t))},_buildplaylist:function(){SaranyuHlsHTML5Player.Utils.DLOG("Building playlist");var t=this,e=(t.mediaElement.videoElement,'<div class="sp-button sp-playlist-button-wrap sp-playlist-inactive"><span class="tooltiptext">'+SaranyuHlsHTML5Player.defaultOptions.titleStrings.playlist+'</span><button class="sp-playlist-btn"></button></div>');t.fullControls.bottomControlBar.bottomPlayerControls.append(e),t.fullControls.bottomControlBar.bottomPlayerControls.playlist=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-playlist-button-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.playlist.button=t.fullControls.bottomControlBar.bottomPlayerControls.playlist.find(".sp-playlist-btn");var o='<div class="sp-playlist-panel"></div>';t.fullControls.append(o),t.fullControls.playlistPanel=t.fullControls.find(".sp-playlist-panel"),t.fullControls.playlistPanel.playingIndex=0;var l='<span class="sp-playlist-panel-left-btn"></span>',a='<span class="sp-playlist-panel-right-btn"></span>';t.fullControls.playlistPanel.append(l),t.fullControls.playlistPanel.append(a),t.fullControls.playlistPanel.playlistLeftButton=t.fullControls.find(".sp-playlist-panel-left-btn"),t.fullControls.playlistPanel.playlistRightButton=t.fullControls.find(".sp-playlist-panel-right-btn");var n='<div class="sp-playlist-panel-itemview"></div>';t.fullControls.playlistPanel.append(n),t.fullControls.playlistPanel.playlistItemView=t.fullControls.find(".sp-playlist-panel-itemview"),$.each(t.options.file,function(e,o){var l;l=0==e?'<div class="item sp-playlist-active-item sp-playlist-item" indexoftile="'+e+'"><img class="sp-playlist-item-img" src="'+t.options.file[e].poster+'"><span class="sp-playlist-item-videotitle">'+t.options.file[e].videotitle+"</span></div>":'<div class="item sp-playlist-item" indexoftile="'+e+'"><img class="sp-playlist-item-img" src="'+t.options.file[e].poster+'"><span class="sp-playlist-item-videotitle">'+t.options.file[e].videotitle+"</span></div>",t.fullControls.playlistPanel.playlistItemView.append(l)}),t.fullControls.playlistPanel.playlistItemView.saranyuOwlCarousel=$(t.fullControls.playlistPanel.playlistItemView),t.fullControls.playlistPanel.playlistItemView.saranyuOwlCarousel.saranyuOwlCarousel({margin:10,items:5,loop:!1,afterAction:function(){this.itemsAmount>this.visibleItems.length?(t.fullControls.playlistPanel.playlistLeftButton.show(),t.fullControls.playlistPanel.playlistRightButton.show(),0==this.currentItem&&t.fullControls.playlistPanel.playlistLeftButton.hide(),this.currentItem==this.maximumItem&&t.fullControls.playlistPanel.playlistRightButton.hide()):(t.fullControls.playlistPanel.playlistLeftButton.hide(),t.fullControls.playlistPanel.playlistRightButton.hide())}}),t.fullControls.playlistPanel.removeActiveClass=function(){$.each(t.fullControls.playlistPanel.find(".sp-playlist-item"),function(t,e){$(e).removeClass("sp-playlist-active-item")})},t.fullControls.playlistPanel.addActiveClass=function(e){$.each(t.fullControls.playlistPanel.find(".sp-playlist-item"),function(t,o){t==e&&$(o).addClass("sp-playlist-active-item")})},t.fullControls.playlistPanel.buildAdCuesAfterPlaylistUpdate=function(){try{t._buildadvertisement._buildadcue.constructed=!1}catch(e){}t.mediaElement.videoElement.addEventListener("timeupdate",function(){"true"!=t.options.advertisement.cues||isNaN(t.mediaElement.videoElement.duration)||"vod"!=t.options.content||t._buildadvertisement._buildadcue.constructed||t._buildadvertisement._buildadcue()})},t.fullControls.playlistPanel.updateNewPlaylistStats=function(e){console.log("Clicked on item "+e),console.log("playingIndex "+t.fullControls.playlistPanel.playingIndex),t.fullControls.playlistPanel.playingIndex=e,console.log("playingIndex "+t.fullControls.playlistPanel.playingIndex),t._createAndAppendHLStoPlayer(t.options.file[e]),t.fullControls.playlistPanel.removeActiveClass(),t.fullControls.playlistPanel.addActiveClass(e),t.fullControls.playlistPanel.playingIndex=e,t.fullControls.playlistPanel.buildAdCuesAfterPlaylistUpdate()},t.fullControls.playlistPanel.find(".sp-playlist-item").click(function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e);var o=$(this).attr("indexoftile");SaranyuHlsHTML5Player.Utils.DLOG("Clicked on item "+o),t.fullControls.playlistPanel.updateNewPlaylistStats(o),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.seekbarPreviewContainerImgTag&&t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.ajaxForVtt(t.options.file[o].thumbnails)}),t.fullControls.bottomControlBar.bottomPlayerControls.playlist.button.click(function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),SaranyuHlsHTML5Player.Utils.DLOG("Clicked on playlist button"),t.fullControls.playlistPanel.toggle(),t._buildadvertisement.initializeAd.adStarted&&!t._buildadvertisement.initializeAd.isLinear&&t.adContainer.toggleClass("sp-playlist-show"),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.popup.hide()}),t.fullControls.playlistPanel.playlistLeftButton.click(function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),SaranyuHlsHTML5Player.Utils.DLOG("Clicked on prev playlist button"),t.fullControls.playlistPanel.playlistItemView.saranyuOwlCarousel.trigger("owl.prev")}),t.fullControls.playlistPanel.playlistRightButton.click(function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),SaranyuHlsHTML5Player.Utils.DLOG("Clicked on next playlist button"),t.fullControls.playlistPanel.playlistItemView.saranyuOwlCarousel.trigger("owl.next")}),t.mediaElement.videoElement.addEventListener("ended",function(){if("true"===t.options.autoplay||1==t.options.autoplay){var e=Number(t.fullControls.playlistPanel.playingIndex)+1;e<t.options.file.length?(SaranyuHlsHTML5Player.Utils.DLOG("video ended choosing next playlist index "+e),t.fullControls.playlistPanel.updateNewPlaylistStats(e)):SaranyuHlsHTML5Player.Utils.DLOG("video ended choosing next playlist index is not present so ending playlist "+e)}else SaranyuHlsHTML5Player.Utils.DLOG("player will be in replay mode and it will play same file")})},_buildrelatedvideo:function(t){SaranyuHlsHTML5Player.Utils.DLOG("Building related video");var e=this,o=e.mediaElement.videoElement,l='<div class="sp-related-panel"></div>';e.fullControls.append(l),e.fullControls.relatedPanel=e.fullControls.find(".sp-related-panel"),e.fullControls.relatedPanel.playingIndex="";var a='<span class="sp-related-panel-titletext">Up Next</span>';e.fullControls.relatedPanel.append(a);var n='<span class="sp-related-panel-left-btn"></span>',r='<span class="sp-related-panel-right-btn"></span>';e.fullControls.relatedPanel.append(n),e.fullControls.relatedPanel.append(r),e.fullControls.relatedPanel.relatedLeftButton=e.fullControls.find(".sp-related-panel-left-btn"),e.fullControls.relatedPanel.relatedRightButton=e.fullControls.find(".sp-related-panel-right-btn");var i='<div class="sp-related-panel-itemview"></div>';if(e.fullControls.relatedPanel.append(i),e.fullControls.relatedPanel.relatedItemView=e.fullControls.find(".sp-related-panel-itemview"),"false"==e.options.relatedvideoautoplay){$.each(e.options.relatedvideos,function(t,o){var l;l=0==t?'<div class="item sp-related-active-item sp-related-item" indexoftile="'+t+'"><img class="sp-related-item-img" src="'+e.options.relatedvideos[t].poster+'"><span class="sp-related-item-videotitle" style="display:none;" >'+e.options.relatedvideos[t].videotitle+"</span></div>":'<div class="item sp-related-item" indexoftile="'+t+'"><img class="sp-related-item-img" src="'+e.options.relatedvideos[t].poster+'"><span class="sp-related-item-videotitle" style="display:none;">'+e.options.relatedvideos[t].videotitle+"</span></div>",e.fullControls.relatedPanel.relatedItemView.append(l)});var s=[[0,1],[366,1],[732,2],[1098,2],[1464,2]]}else{console.log("only 1 related video------");var d,u=0;d='<div class="item sp-related-item" indexoftile="'+u+'"><img class="sp-related-item-img" src="'+e.options.relatedvideos[u].poster+'"></div>',e.fullControls.relatedPanel.relatedItemView.append(d);var m='<span class="sp-related-panel-autotext">'+e.options.relatedvideos[u].videotitle+'</span><span class="sp-related-panel-autotext1">Will automatically load in <span class="timer">10</span> seconds</span>';e.fullControls.relatedPanel.append(m);var s=[[0,2],[440,3],[768,4],[1366,5]]}e.fullControls.relatedPanel.relatedItemView.saranyuOwlCarousel=$(e.fullControls.relatedPanel.relatedItemView),e.fullControls.relatedPanel.relatedItemView.saranyuOwlCarousel.saranyuOwlCarousel({itemsCustom:s,loop:!1,afterAction:function(){this.itemsAmount>this.visibleItems.length?(e.fullControls.relatedPanel.relatedLeftButton.show(),e.fullControls.relatedPanel.relatedRightButton.show(),0==this.currentItem&&e.fullControls.relatedPanel.relatedLeftButton.hide(),this.currentItem==this.maximumItem&&e.fullControls.relatedPanel.relatedRightButton.hide()):(e.fullControls.relatedPanel.relatedLeftButton.hide(),e.fullControls.relatedPanel.relatedRightButton.hide())}}),e.fullControls.relatedPanel.removeActiveClass=function(){$.each(e.fullControls.relatedPanel.find(".sp-related-item"),function(t,e){$(e).removeClass("sp-related-active-item")})},e.fullControls.relatedPanel.addActiveClass=function(t){$.each(e.fullControls.relatedPanel.find(".sp-related-item"),function(e,o){e==t&&$(o).addClass("sp-related-active-item")})},e.fullControls.relatedPanel.buildAdCuesAfterrelatedUpdate=function(){try{e._buildadvertisement._buildadcue.constructed=!1}catch(t){}e.mediaElement.videoElement.addEventListener("timeupdate",function(){"true"!=e.options.advertisement.cues||isNaN(e.mediaElement.videoElement.duration)||"vod"!=e.options.content||e._buildadvertisement._buildadcue.constructed||e._buildadvertisement._buildadcue()})},e.fullControls.relatedPanel.updateNewrelatedStats=function(t){console.log("play the related video now-----"),console.log("Clicked on item "+t),console.log("playingIndex "+e.fullControls.relatedPanel.playingIndex),e.fullControls.relatedPanel.playingIndex=t,console.log("playingIndex "+e.fullControls.relatedPanel.playingIndex),e._createAndAppendHLStoPlayer(e.options.relatedvideos[t]),e.fullControls.relatedPanel.removeActiveClass(),e.fullControls.relatedPanel.addActiveClass(t),e.fullControls.relatedPanel.playingIndex=t,e.fullControls.relatedPanel.buildAdCuesAfterrelatedUpdate()},e.fullControls.relatedPanel.find(".sp-related-item").click(function(t){t=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(t);var l=$(this).attr("indexoftile");SaranyuHlsHTML5Player.Utils.DLOG("Clicked on item "+l),e.fullControls.relatedPanel.updateNewrelatedStats(l);try{e.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.seekbarPreviewContainerImgTag&&e.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.ajaxForVtt(e.options.relatedvideos[l].thumbnails)}catch(t){}e.fullControls.relatedPanel.hide(),o.play();try{e.eventcallbacks.onRelatedVideoClick(e.options.relatedvideos[l].mediaid,e.options.relatedvideos[l].catalogid)}catch(t){}}),e.fullControls.relatedPanel.relatedLeftButton.click(function(t){t=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(t),
SaranyuHlsHTML5Player.Utils.DLOG("Clicked on prev related button"),e.fullControls.relatedPanel.relatedItemView.saranyuOwlCarousel.trigger("owl.prev")}),e.fullControls.relatedPanel.relatedRightButton.click(function(t){t=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(t),SaranyuHlsHTML5Player.Utils.DLOG("Clicked on next related button"),e.fullControls.relatedPanel.relatedItemView.saranyuOwlCarousel.trigger("owl.next")}),t||(e.mediaElement.videoElement.addEventListener("timeupdate",function(t){try{clearTimeout(e.fullControls.relatedPanel.relatedVideosTimer),clearInterval(e.fullControls.relatedPanel.relatedVideosDisplayTimer),$(e.fullControls.relatedPanel.find(".sp-related-panel-autotext1")).html("Will automatically load in <span class='timer'>10</span> seconds"),e.fullControls.relatedPanel.hide()}catch(t){}}),e.mediaElement.videoElement.addEventListener("ended",function(){if(("true"==e.options.relatedvideoautoplay||1==e.options.relatedvideoautoplay)&&e.options.relatedvideos.length>0){if(""===e.fullControls.relatedPanel.playingIndex){e.fullControls.relatedPanel.playingIndex=0;var t=0}else{var t=Number(e.fullControls.relatedPanel.playingIndex)+1;t>e.options.relatedvideos.length-1&&(t=0)}t<=e.options.relatedvideos.length&&(console.log("related video show now---"+t),e.fullControls.relatedPanel.item=e.fullControls.relatedPanel.find(".sp-related-item"),e.fullControls.relatedPanel.item.attr("indexoftile",t),e.fullControls.relatedPanel.item.span=e.fullControls.relatedPanel.item.find("span"),e.fullControls.relatedPanel.item.span.html(e.options.relatedvideos[t].videotitle),e.fullControls.relatedPanel.item.img=e.fullControls.relatedPanel.item.find("img"),$(e.fullControls.relatedPanel.item.img).attr("src",e.options.relatedvideos[t].poster),console.log("now next item should play"),$(e.fullControls.relatedPanel.find(".sp-related-panel-autotext").html(e.options.relatedvideos[t].videotitle)),e.fullControls.relatedPanel.relatedVideosDisplayTimerCount=9,e.fullControls.relatedPanel.relatedVideosDisplayTimer=setInterval(function(){var o=e.fullControls.relatedPanel.relatedVideosDisplayTimerCount;$(e.fullControls.relatedPanel.find(".sp-related-panel-autotext").html(e.options.relatedvideos[t].videotitle)),$(e.fullControls.relatedPanel.find(".sp-related-panel-autotext1")).html("Will automatically load in <span class='timer'>"+o+"</span> seconds"),e.fullControls.relatedPanel.relatedVideosDisplayTimerCount-=1}.bind(e),1e3),e.fullControls.relatedPanel.relatedVideosTimer=setTimeout(function(){e.fullControls.relatedPanel.hide(),e.fullControls.relatedPanel.updateNewrelatedStats(t),o.play();try{e.eventcallbacks.onRelatedVideoClick(e.options.relatedvideos[t].mediaid,e.options.relatedvideos[t].catalogid)}catch(l){}}.bind(e,t),1e4))}})),e._buildrelatedvideo.flushRelatedVideos=function(){e.options.relatedvideos=[],e.fullControls.relatedPanel.playingIndex=""},e._buildrelatedvideo.appendRelatedVideos=function(t,o){"undefined"!=typeof o&&(e.options.relatedvideoautoplay=o),$.each(t,function(t,o){e.options.relatedvideos.push(o)}),e.fullControls.relatedPanel.remove(),e._buildrelatedvideo(!0)}.bind(e)},_buildvideotitle:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching video title");var t=this,e='<div class="sp-controls-top-video-title"><span class="sp-controls-top-video-title-text"></span></div>';t.fullControls.topContolbar.append(e),t.fullControls.topContolbar.videoTitle=t.fullControls.topContolbar.find(".sp-controls-top-video-title .sp-controls-top-video-title-text"),t.fullControls.topContolbar.videoTitle.changeTitle=function(e){t.fullControls.topContolbar.videoTitle.html(e)}.bind(t)},_buildbigicons:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching big icons");var t=this,e=(t.options,t.mediaElement.videoElement),o='<div class="sp-player-poster"><img></div>',l='<div class="sp-player-bigplay"></div>',a='<div class="sp-player-loading"></div>',n='<div class="sp-player-replay"></div>';t.playerLayers.append(o),t.playerLayers.append(l),t.playerLayers.append(a),t.playerLayers.append(n),t.playerLayers.poster=t.playerLayers.find(".sp-player-poster"),t.playerLayers.poster.img=t.playerLayers.poster.find("img"),t.playerLayers.poster.changePoster=function(e){$(t.playerLayers.poster.img).attr("src",e)}.bind(t),t.playerLayers.bigplay=t.playerLayers.find(".sp-player-bigplay"),t.playerLayers.loading=t.playerLayers.find(".sp-player-loading"),t.playerLayers.bigreplay=t.playerLayers.find(".sp-player-replay"),"true"===t.options.autoplay||1==t.options.autoplay?(t.playerLayers.bigplay.hide(),t.playerLayers.bigreplay.hide()):(t.playerLayers.bigreplay.hide(),t.playerLayers.loading.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.addClass("sp-pause"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-play"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-replay"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.play)),t.playerLayers.on("click",function(o){t._createFullControls.showFullControls(),SaranyuHlsHTML5Player.bigPlayClickCounter++,1===SaranyuHlsHTML5Player.bigPlayClickCounter?SaranyuHlsHTML5Player.bigPlayClickCounterTimer=setTimeout(function(){e.paused?t._videoPlayerControls("play"):t._videoPlayerControls("pause"),SaranyuHlsHTML5Player.bigPlayClickCounter=0}.bind(t),SaranyuHlsHTML5Player.bigPlayClickDELAY):(clearTimeout(SaranyuHlsHTML5Player.bigPlayClickCounterTimer),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.toggleFullscreen(),SaranyuHlsHTML5Player.bigPlayClickCounter=0)}).on("dblclick",function(t){t.preventDefault()}),e.addEventListener("play",function(){t.playerLayers.poster.hide(),t.playerLayers.bigplay.hide(),t.playerLayers.loading.hide(),t.playerLayers.bigreplay.hide()}),e.addEventListener("playing",function(){t.playerLayers.poster.hide(),t.playerLayers.bigplay.hide(),t.playerLayers.loading.hide(),t.playerLayers.bigreplay.hide()}),e.addEventListener("pause",function(){t.playerLayers.bigplay.show(),t.playerLayers.loading.hide(),t.playerLayers.bigreplay.hide()}),e.addEventListener("waiting",function(){e.paused||t.playerLayers.loading.show()}),e.addEventListener("ended",function(){t.playerLayers.bigreplay.show(),t.playerLayers.bigplay.hide()})},_buildeventcallbacks:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching Event Callbacks");var t=this,e=t.mediaElement.videoElement;t.eventcallbacks={},e.addEventListener("ended",function(){try{if(t._buildadvertisement.initializeAd.isLinear)return}catch(o){}try{t.eventcallbacks.onComplete(e.currentTime,e.duration,e.mediaId)}catch(o){SaranyuHlsHTML5Player.Utils.DLOG("callback events complete is not listened")}}),e.addEventListener("pause",function(){try{if(t._buildadvertisement.initializeAd.isLinear)return}catch(o){}try{t.eventcallbacks.onPause(e.currentTime,e.duration,e.mediaId)}catch(o){SaranyuHlsHTML5Player.Utils.DLOG("callback events Pause is not listened")}}),e.addEventListener("play",function(){try{if(t._buildadvertisement.initializeAd.isLinear)return}catch(o){}try{0==e.currentTime?t.eventcallbacks.onPlay(e.currentTime,e.duration,e.mediaId):t.eventcallbacks.onResume(e.currentTime,e.duration,e.mediaId)}catch(o){SaranyuHlsHTML5Player.Utils.DLOG("callback events Play/Resume is not listened")}}),e.addEventListener("seeked",function(){try{if(t._buildadvertisement.initializeAd.isLinear)return}catch(o){}try{t.eventcallbacks.onSeeked(e.currentTime,e.duration,e.mediaId)}catch(o){SaranyuHlsHTML5Player.Utils.DLOG("callback events Seeked is not listened")}})},_buildhotkeys:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching Hotkeys");var t=this,e=t.mediaElement.videoElement,o='<div class="sp-player-text-feedback-container"></div>';t.playerLayers.append(o),t.playerLayers.feedbackTextElement=t.playerLayers.find(".sp-player-text-feedback-container"),t.playerLayers.feedbackTextElement.hide(),t.playerInner.attr("tabindex","0"),t.playerInner.keydown(function(o){o.preventDefault();try{if(t._buildadvertisement.initializeAd.isLinear)return}catch(l){}var a="number"==typeof o.which?o.which:o.keyCode;if(13==a||32==a)SaranyuHlsHTML5Player.Utils.DLOG("Hotkey space/enter pressed which actions play/pause"),e.paused?t._videoPlayerControls("play"):t._videoPlayerControls("pause");else if(109==a||77==a)SaranyuHlsHTML5Player.Utils.DLOG("Hotkey M/m pressed which actions mute or unmute"),1==e.muted?t._videoPlayerControls("unmute"):t._videoPlayerControls("mute");else if(70==a||102==a)SaranyuHlsHTML5Player.Utils.DLOG("Hotkey F/f pressed which actions fullscreen toggle"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.toggleFullscreen();else if(117==a||85==a){SaranyuHlsHTML5Player.Utils.DLOG("Hotkey up-arrow pressed which actions  volume increase");var n=e.volume;n+=.1,n=Math.max(0,n),n=Math.min(n,1),t._videoPlayerControls("volumechange",n),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.positionVolumeHandle(n)}else if(100==a||68==a){SaranyuHlsHTML5Player.Utils.DLOG("Hotkey down-arrow pressed which actions volume decrease");var n=e.volume;n-=.1,n=Math.max(0,n),n=Math.min(n,1),t._videoPlayerControls("volumechange",n),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.positionVolumeHandle(n)}})},_buildadvertisement:function(){SaranyuHlsHTML5Player.Utils.DLOG("building advertisement");var t=this,e=t.options,o=["playpause","fullScreen","volume","title","time"];if(e.advertisement){var l='<div class="sp-ad-top-controlbar"></div>',a='<div class="sp-ad-video-element"></div>',n='<div class="sp-ad-bottom-controlbar"></div>',r='<video class="sp-ad-dummy-video"></video>';t.adContainer.append(r),t.adContainer.append(l),t.adContainer.append(a),t.adContainer.append(n),t.adContainer.adTopControls=t.adContainer.find(".sp-ad-top-controlbar"),t.adContainer.adVideoElement=t.adContainer.find(".sp-ad-video-element"),t.adContainer.adBottomControls=t.adContainer.find(".sp-ad-bottom-controlbar"),t.adContainer.adDummyVideoTag=t.adContainer.find(".sp-ad-dummy-video"),t._buildadvertisement._buildadcue=function(){if(SaranyuHlsHTML5Player.Utils.DLOG("Building ad title icon for ad container"),t._buildadvertisement._buildadcue.constructed=!1,!t._buildadvertisement._buildadcue.constructed){try{t.fullControls.bottomControlBar.bottomProgressBar.progressbar.cues.empty()}catch(e){}$.each(t._buildadvertisement.adsets,function(e,o){if(Number(o.schedule)){var l=SaranyuHlsHTML5Player.Utils.getPercentageForGivenDuration(o.schedule,t.mediaElement.videoElement.duration);if(!(l>=0&&100>=l))return!0;var a="<span class='sp-ad-cue-points sp-ad-cue-points-"+e+"' style='left:"+l+"%'></span>";t.fullControls.bottomControlBar.bottomProgressBar.progressbar.cues.append(a);t.fullControls.bottomControlBar.bottomProgressBar.progressbar.cues.find(".sp-ad-cue-points-"+e);t._buildadvertisement._buildadcue.constructed=!0}})}},t._buildadvertisement._buildadtitle=function(){SaranyuHlsHTML5Player.Utils.DLOG("Building ad title icon for ad container");var e='<div class="ad-video-title"><span class="ad-video-title-text"></span></div>';t.adContainer.adTopControls.append(e),t.adContainer.adTopControls.adTitle=t.adContainer.adTopControls.find(".ad-video-title-text")},t._buildadvertisement._buildadplaypause=function(){SaranyuHlsHTML5Player.Utils.DLOG("Building playpause icon for ad container");var e='<div class="sp-ad-button sp-ad-playpause sp-ad-play"><button></button></div>';t.adContainer.adBottomControls.append(e),t.adContainer.adBottomControls.playpause=t.adContainer.adBottomControls.find(".sp-ad-playpause"),t.adContainer.adBottomControls.playpause.click(function(){SaranyuHlsHTML5Player.Utils.DLOG("AD play pause button clicked");try{t._buildadvertisement.initializeAd.adPaused?(t._buildadvertisement.initializeAd.adsManager.resume(),t._buildadvertisement.initializeAd.adPaused=!1):(t._buildadvertisement.initializeAd.adsManager.pause(),t._buildadvertisement.initializeAd.adPaused=!0)}catch(e){}}.bind(t)),t.adContainer.adBottomControls.playpause.changeIcon=function(){t._buildadvertisement.initializeAd.adPaused?t.adContainer.adBottomControls.playpause.removeClass("sp-ad-play").addClass("sp-ad-pause"):t.adContainer.adBottomControls.playpause.removeClass("sp-ad-pause").addClass("sp-ad-play")}},t._buildadvertisement._buildadvolume=function(){SaranyuHlsHTML5Player.Utils.DLOG("Building volume icon for ad container");var e='<div class="sp-ad-button sp-ad-volume-muteunmute sp-ad-unmute"><button></button></div>';t.adContainer.adBottomControls.append(e),t.adContainer.adBottomControls.volumeMuteUnmute=t.adContainer.adBottomControls.find(".sp-ad-volume-muteunmute");var o='<div class="sp-ad-volume-slider sp-ad-volume-slider-wrap"><div class="sp-ad-volume-current"></div><div class="sp-ad-volume-handle"></div></div>';t.adContainer.adBottomControls.append(o),t.adContainer.adBottomControls.volumeSlider=t.adContainer.adBottomControls.find(".sp-ad-volume-slider.sp-ad-volume-slider-wrap"),t.adContainer.adBottomControls.volumeSlider.volumeCurrent=t.adContainer.adBottomControls.volumeSlider.find(".sp-ad-volume-current"),t.adContainer.adBottomControls.volumeSlider.volumeHandle=t.adContainer.adBottomControls.volumeSlider.find(".sp-ad-volume-handle"),t.adContainer.adBottomControls.volumeSlider.oldVolume=1,t.adContainer.adBottomControls.volumeSlider.positionVolumeHandle=function(e){t.adContainer.adBottomControls.volumeSlider.volumeCurrent.css("width",100*e+"%"),t.adContainer.adBottomControls.volumeSlider.volumeHandle.css("left","calc("+100*e+"% - "+t.adContainer.adBottomControls.volumeSlider.volumeHandle.width()/2+"px)")},t.adContainer.adBottomControls.volumeSlider.handleVolumeMove=function(e){var o=null,l=t.adContainer.adBottomControls.volumeSlider,a=l.offset(),n=l.width(),r=e.pageX-a.left;o=r/n,o=Math.max(0,o),o=Math.min(o,1),t.adContainer.adBottomControls.volumeSlider.positionVolumeHandle(o);try{t._buildadvertisement.initializeAd.adsManager.setVolume(o),t.adContainer.adBottomControls.volumeSlider.oldVolume=o}catch(e){}},t.adContainer.adBottomControls.volumeSlider.bind("mouseover",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.adContainer.adBottomControls.volumeSlider.mouseIsOver=!0}).bind("mousemove",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),1==t.adContainer.adBottomControls.volumeSlider.mouseIsDown&&t.adContainer.adBottomControls.volumeSlider.handleVolumeMove(e)}).bind("mouseup",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.adContainer.adBottomControls.volumeSlider.mouseIsDown=!1}).bind("mousedown",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.adContainer.adBottomControls.volumeSlider.handleVolumeMove(e),t.adContainer.adBottomControls.volumeSlider.mouseIsDown=!0}).bind("mouseleave",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.adContainer.adBottomControls.volumeSlider.mouseIsDown=!1}),t.adContainer.adBottomControls.volumeMuteUnmute.click(function(){t._buildadvertisement.initializeAd.adMuted?(t.adContainer.adBottomControls.volumeSlider.oldVolume>=0&&t._buildadvertisement.initializeAd.adsManager.setVolume(t.adContainer.adBottomControls.volumeSlider.oldVolume),t._buildadvertisement.initializeAd.adsManager.setVolume(.2),t._buildadvertisement.initializeAd.adMuted=!1):(t._buildadvertisement.initializeAd.adsManager.setVolume(0),t._buildadvertisement.initializeAd.adMuted=!0)}),t.adContainer.adBottomControls.volumeMuteUnmute.changeIcon=function(){t._buildadvertisement.initializeAd.adMuted?(t.adContainer.adBottomControls.volumeMuteUnmute.addClass("sp-ad-mute").removeClass("sp-ad-unmute"),t.adContainer.adBottomControls.volumeSlider.hide()):(t.adContainer.adBottomControls.volumeMuteUnmute.addClass("sp-ad-unmute").removeClass("sp-ad-mute"),t.adContainer.adBottomControls.volumeSlider.show())},t.adContainer.adBottomControls.volumeMuteUnmute.checkDefaultContentVolume=function(){t.mediaElement.videoElement.muted?(t.adContainer.adBottomControls.volumeMuteUnmute.removeClass("sp-ad-unmute").addClass("sp-ad-mute"),t._buildadvertisement.initializeAd.adsManager.setVolume(0),t.adContainer.adBottomControls.volumeSlider.oldVolume=t.mediaElement.videoElement.volume,t.adContainer.adBottomControls.volumeSlider.positionVolumeHandle(t.adContainer.adBottomControls.volumeSlider.oldVolume),t._buildadvertisement.initializeAd.adMuted=!0):(t.adContainer.adBottomControls.volumeMuteUnmute.removeClass("sp-ad-mute").addClass("sp-ad-unmute"),t._buildadvertisement.initializeAd.adsManager.setVolume(t.mediaElement.videoElement.volume),t.adContainer.adBottomControls.volumeSlider.oldVolume=t.mediaElement.videoElement.volume,t.adContainer.adBottomControls.volumeSlider.positionVolumeHandle(t.adContainer.adBottomControls.volumeSlider.oldVolume),t._buildadvertisement.initializeAd.adMuted=!1)}},t._buildadvertisement._buildadtime=function(){SaranyuHlsHTML5Player.Utils.DLOG("Building time for ad container");var e='<div class="sp-ad-player-time"><span class="sp-ad-plyr-currenttime">00:00</span>&nbsp;/&nbsp;<span class="sp-ad-plyr-duration">00:00</span></div>';t.adContainer.adBottomControls.append(e),t.adContainer.adBottomControls.timeContainer=t.adContainer.adBottomControls.find(".sp-ad-player-time"),t.adContainer.adBottomControls.timeContainer.currentTime=t.adContainer.adBottomControls.find(".sp-ad-plyr-currenttime"),t.adContainer.adBottomControls.timeContainer.duration=t.adContainer.adBottomControls.find(".sp-ad-plyr-duration"),t._buildadvertisement._buildadtime.changeCurrentTime=function(){try{var e=0;e=t._buildadvertisement.initializeAd.ad.getDuration()-t._buildadvertisement.initializeAd.remainingTime>=0?t._buildadvertisement.initializeAd.ad.getDuration()-t._buildadvertisement.initializeAd.remainingTime:0,t.adContainer.adBottomControls.timeContainer.currentTime.html(SaranyuHlsHTML5Player.Utils.secondsToTimeCode(e))}catch(o){}},t._buildadvertisement._buildadtime.changeDuration=function(){try{t.adContainer.adBottomControls.timeContainer.duration.html(SaranyuHlsHTML5Player.Utils.secondsToTimeCode(t._buildadvertisement.initializeAd.ad.getDuration()))}catch(e){}}},t._buildadvertisement._buildadfullScreen=function(){SaranyuHlsHTML5Player.Utils.DLOG("Building playpause icon for ad container");var e='<div class="sp-ad-button sp-ad-fullscreen-unfullscreen sp-ad-fullscreen"><button></button></div>';t.adContainer.adBottomControls.append(e),t.adContainer.adBottomControls.fullscreenunfullscreen=t.adContainer.adBottomControls.find(".sp-ad-fullscreen-unfullscreen");var o=t.isFullScreen;o?t.adContainer.adBottomControls.fullscreenunfullscreen.removeClass("sp-ad-fullscreen").addClass("sp-ad-unfullscreen"):t.adContainer.adBottomControls.fullscreenunfullscreen.removeClass("sp-ad-unfullscreen").addClass("sp-ad-fullscreen"),t.adContainer.adBottomControls.fullscreenunfullscreen.click(function(e){e.preventDefault(),SaranyuHlsHTML5Player.Utils.DLOG("Clicked on FullScreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.toggleFullscreen(),setTimeout(function(){var e=t.isFullScreen;e?t.adContainer.adBottomControls.fullscreenunfullscreen.removeClass("sp-ad-fullscreen").addClass("sp-ad-unfullscreen"):t.adContainer.adBottomControls.fullscreenunfullscreen.removeClass("sp-ad-unfullscreen").addClass("sp-ad-fullscreen")}.bind(t),600)}.bind(t))},t._buildadvertisement._createAdControls=function(){SaranyuHlsHTML5Player.Utils.DLOG("_createAdControls");var t=this,e=o;t._buildadvertisement._destroyAdControls();for(featureIndex in e)if(feature=e[featureIndex],SaranyuHlsHTML5Player.Utils.DLOG("ad feature found is "+feature),t._buildadvertisement["_buildad"+feature])try{t._buildadvertisement["_buildad"+feature]()}catch(l){SaranyuHlsHTML5Player.Utils.DLOG(l)}else SaranyuHlsHTML5Player.Utils.DLOG("Error could not find function")}.bind(t),t._buildadvertisement._destroyAdControls=function(){SaranyuHlsHTML5Player.Utils.DLOG("_destroyAdControls");var t=this;t.adContainer.adTopControls.empty(),t.adContainer.adBottomControls.empty(),t.adContainer.adVideoElement.empty();try{t.fullControls.bottomControlBar.bottomProgressBar.progressbar.cues.empty()}catch(e){}}.bind(t),t._buildadvertisement._createAdControls(),t._buildadvertisement.initializeAd=function(e){try{try{t.adContainer.adBottomControls.volumeMuteUnmute.checkDefaultContentVolume()}catch(o){}t._buildadvertisement.initializeAd.onAdError()}catch(o){}t._buildadvertisement.initializeAd.adsManager,t._buildadvertisement.initializeAd.adsLoader,t._buildadvertisement.initializeAd.adDisplayContainer,t._buildadvertisement.initializeAd.intervalTimer,t._buildadvertisement.initializeAd.videoContent,t._buildadvertisement.initializeAd.adStarted=!1,t._buildadvertisement.initializeAd.isLinear=!1,t._buildadvertisement.initializeAd.adObj,t._buildadvertisement.initializeAd.adPaused=!1,t._buildadvertisement.initializeAd.adMuted=!1,t._buildadvertisement.initializeAd.init=function(e){t._buildadvertisement.initializeAd.videoContent=t.adContainer.adDummyVideoTag[0],t._buildadvertisement.initializeAd.setUpIMA(e)},t._buildadvertisement.initializeAd.setUpIMA=function(e){t._buildadvertisement.initializeAd.createAdDisplayContainer(),t._buildadvertisement.initializeAd.adsLoader=new google.ima.AdsLoader(t._buildadvertisement.initializeAd.adDisplayContainer),t._buildadvertisement.initializeAd.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,t._buildadvertisement.initializeAd.onAdsManagerLoaded,!1),t._buildadvertisement.initializeAd.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t._buildadvertisement.initializeAd.onAdError,!1),t._buildadvertisement.initializeAd.adsRequest=new google.ima.AdsRequest,t._buildadvertisement.initializeAd.adsRequest.adTagUrl=e.adurl,t._buildadvertisement.initializeAd.adsRequest.linearAdSlotWidth=t.adContainer.width(),t._buildadvertisement.initializeAd.adsRequest.linearAdSlotHeight=t.adContainer.height(),t._buildadvertisement.initializeAd.adsRequest.nonLinearAdSlotWidth=t.adContainer.width(),t._buildadvertisement.initializeAd.adsRequest.nonLinearAdSlotHeight=SaranyuHlsHTML5Player.maxNonLinearAdHeight,t._buildadvertisement.initializeAd.adsLoader.requestAds(t._buildadvertisement.initializeAd.adsRequest)}.bind(t),t._buildadvertisement.initializeAd.createAdDisplayContainer=function(){try{t.adContainer.adVideoElement.empty()}catch(e){}google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),t._buildadvertisement.initializeAd.adDisplayContainer=new google.ima.AdDisplayContainer(t.adContainer.adVideoElement[0],t._buildadvertisement.initializeAd.videoContent[0])},t._buildadvertisement.initializeAd.playAds=function(){try{t.adContainer.addClass("sp-ad-container-display")}catch(e){}t._buildadvertisement.initializeAd.videoContent.load(),t._buildadvertisement.initializeAd.adDisplayContainer.initialize();try{t._buildadvertisement.initializeAd.adsManager.init(t.adContainer.adVideoElement.width(),t.adContainer.adVideoElement.height(),google.ima.ViewMode.NORMAL),t._buildadvertisement.initializeAd.adsManager.start()}catch(o){t._buildadvertisement.initializeAd.videoContent.play()}},t._buildadvertisement.initializeAd.onAdsManagerLoaded=function(e){t._buildadvertisement.initializeAd.adsRenderingSettings=new google.ima.AdsRenderingSettings,t._buildadvertisement.initializeAd.adsManager=e.getAdsManager(t._buildadvertisement.initializeAd.videoContent,t._buildadvertisement.initializeAd.adsRenderingSettings),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t._buildadvertisement.initializeAd.onAdError),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,t._buildadvertisement.initializeAd.onContentPauseRequested),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,t._buildadvertisement.initializeAd.onContentResumeRequested),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_MUTED,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.playAds()},t._buildadvertisement.initializeAd.onAdError=function(e){try{SaranyuHlsHTML5Player.Utils.DLOG(e.getError())}catch(o){}try{t._buildadvertisement.initializeAd.isLinear&&(SaranyuHlsHTML5Player.Utils.DLOG("Retaining volume status change made in ad player to content player"),t._videoPlayerControls("volumechange",t.adContainer.adBottomControls.volumeSlider.oldVolume),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.positionVolumeHandle(t.adContainer.adBottomControls.volumeSlider.oldVolume),t._buildadvertisement.initializeAd.adMuted?t._videoPlayerControls("mute"):t._videoPlayerControls("unmute"))}catch(o){}try{t._buildadvertisement.initializeAd.adsManager.destroy()}catch(o){}try{clearInterval(t._buildadvertisement.initializeAd.intervalTimer)}catch(o){}try{SaranyuHlsHTML5Player.Utils.DLOG("resetting ad container height"),t.adContainer.height("100%")}catch(o){}try{t.adContainer.removeClass("sp-ad-container-display")}catch(o){}if("postroll"!=t._buildadvertisement.initializeAd.adObj.schedule)t.mediaElement.videoElement.play();else{var l=Number(t.fullControls.playlistPanel.playingIndex)+1;l<t.options.file.length&&t.mediaElement.videoElement.play()}t.adContainer.removeClass("sp-ad-active"),t.adContainer.removeClass("sp-ad-banner"),t._buildadvertisement.initializeAd.adStarted=!1,t._buildadvertisement.initializeAd.isLinear=!1},t._buildadvertisement.initializeAd.onAdEvent=function(e){switch(t._buildadvertisement.initializeAd.ad=e.getAd(),e.type){case google.ima.AdEvent.Type.LOADED:if(t._buildadvertisement.initializeAd.ad.isLinear())t._buildadvertisement.initializeAd.adStarted=!0,t._buildadvertisement.initializeAd.isLinear=!0,t.adContainer.addClass("sp-ad-active"),t.adContainer.adTopControls.adTitle.html(t._buildadvertisement.initializeAd.ad.getTitle()),t.adContainer.adBottomControls.volumeMuteUnmute.checkDefaultContentVolume(),t._buildadvertisement.initializeAd.intervalTimer=setInterval(function(){t._buildadvertisement.initializeAd.remainingTime=t._buildadvertisement.initializeAd.adsManager.getRemainingTime(),t._buildadvertisement.initializeAd.remainingTime=t._buildadvertisement.initializeAd.remainingTime>=0?t._buildadvertisement.initializeAd.remainingTime:0,t._buildadvertisement.initializeAd.adsManager.resize(t.adContainer.adVideoElement.width(),t.adContainer.adVideoElement.height(),google.ima.ViewMode.NORMAL),t._buildadvertisement._buildadtime.changeCurrentTime(),t._buildadvertisement._buildadtime.changeDuration(),t.mediaElement.videoElement.pause()}.bind(t),300);else{t._buildadvertisement.initializeAd.adStarted=!0,t._buildadvertisement.initializeAd.isLinear=!1,t.adContainer.addClass("sp-ad-banner"),t.adContainer.adBottomControls.volumeMuteUnmute.checkDefaultContentVolume(),t.adContainer.height(t._buildadvertisement.initializeAd.ad.getHeight()+10),t._buildadvertisement.initializeAd.intervalTimer=setInterval(function(){t._buildadvertisement.initializeAd.adsManager.resize(t.adContainer.adVideoElement.width(),t.adContainer.adVideoElement.height(),google.ima.ViewMode.NORMAL)}.bind(t),300);var o='<div class="sp-ad-banner-closebtn">Close</div>';t.adContainer.adVideoElement.append(o),t.adContainer.adVideoElement.bannerAdCloseBtn=t.adContainer.adVideoElement.find(".sp-ad-banner-closebtn"),t.adContainer.adVideoElement.bannerAdCloseBtn.click(function(){t.adContainer.removeClass("sp-ad-banner"),$(this).remove()})}break;case google.ima.AdEvent.Type.STARTED:t._buildadvertisement.initializeAd.ad.isLinear();break;case google.ima.AdEvent.Type.CLICK:t._buildadvertisement.initializeAd.adsManager.pause();break;case google.ima.AdEvent.Type.PAUSED:t._buildadvertisement.initializeAd.adPaused=!0,t.adContainer.adBottomControls.playpause.changeIcon();break;case google.ima.AdEvent.Type.RESUMED:t._buildadvertisement.initializeAd.adPaused=!1,t.adContainer.adBottomControls.playpause.changeIcon();break;case google.ima.AdEvent.Type.VOLUME_CHANGED:0==t._buildadvertisement.initializeAd.adsManager.getVolume()?t._buildadvertisement.initializeAd.adMuted=!0:(t._buildadvertisement.initializeAd.adMuted=!1,t.adContainer.adBottomControls.volumeSlider.positionVolumeHandle(t._buildadvertisement.initializeAd.adsManager.getVolume())),t.adContainer.adBottomControls.volumeMuteUnmute.changeIcon();break;case google.ima.AdEvent.Type.VOLUME_MUTED:t._buildadvertisement.initializeAd.adMuted=!0,t.adContainer.adBottomControls.volumeMuteUnmute.changeIcon();break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.SKIPPED:t._buildadvertisement.initializeAd.onAdError()}},t._buildadvertisement.initializeAd.onContentPauseRequested=function(){t._buildadvertisement.initializeAd.videoContent.pause()},t._buildadvertisement.initializeAd.onContentResumeRequested=function(){t._buildadvertisement.initializeAd.videoContent.play()},t._buildadvertisement.initializeAd.init(e)}.bind(t),t._buildadvertisement.adsets=e.advertisement.adsets,t._buildadvertisement.adinvoker=function(){t._buildadvertisement.adinvoker.peroll,t._buildadvertisement.adinvoker.midroll=[],t._buildadvertisement.adinvoker.postroll,$.each(t._buildadvertisement.adsets,function(e,o){"preroll"==o.schedule&&(SaranyuHlsHTML5Player.Utils.DLOG("Preroll ad has been invoked"),t._buildadvertisement.initializeAd.adObj=o,t._buildadvertisement.initializeAd(t._buildadvertisement.initializeAd.adObj),t._buildadvertisement.adinvoker.peroll=!0),isNaN(o.schedule)||(o.flag=!0,t._buildadvertisement.adinvoker.midroll.push(o)),"postroll"==o.schedule&&t.mediaElement.videoElement.addEventListener("ended",function(){t._buildadvertisement.adinvoker.postroll?SaranyuHlsHTML5Player.Utils.DLOG("Postroll ad has been played"):(SaranyuHlsHTML5Player.Utils.DLOG("Postroll ad has been invoked"),t._buildadvertisement.initializeAd.adObj=o,t._buildadvertisement.initializeAd(t._buildadvertisement.initializeAd.adObj),t._buildadvertisement.adinvoker.postroll=!0)}.bind(t))}),t._buildadvertisement.adinvoker.midroll&&t.mediaElement.videoElement.addEventListener("timeupdate",function(){"true"!=t.options.advertisement.cues||isNaN(t.mediaElement.videoElement.duration)||"vod"!=t.options.content||t._buildadvertisement._buildadcue.constructed||t._buildadvertisement._buildadcue(),$.each(t._buildadvertisement.adinvoker.midroll,function(e,o){var l=t.mediaElement.videoElement;l.currentTime>=Number(o.schedule)&&o.flag&&!l.paused&&(SaranyuHlsHTML5Player.Utils.DLOG("midroll ad has been invoked with schedule "+Number(o.schedule)),t._buildadvertisement.initializeAd.adObj=o,t._buildadvertisement.initializeAd(t._buildadvertisement.initializeAd.adObj),
t._buildadvertisement.initializeAd.adObj.flag=!1)})}.bind(t))},function(){if(SaranyuHlsHTML5Player.googleImaSDKLoaded)SaranyuHlsHTML5Player.Utils.DLOG("Google IMA SDK was Loaded already"),t._buildadvertisement.adinvoker();else{var e=document.createElement("script");e.type="text/javascript",e.src=SaranyuHlsHTML5Player.googleImaSDKURL,document.getElementsByTagName("head")[0].appendChild(e),SaranyuHlsHTML5Player.googleImaSDKLoaded=!0,SaranyuHlsHTML5Player.Utils.DLOG("Google IMA SDK Loaded"),e.onload=function(){t._buildadvertisement.adinvoker()}.bind(t)}}.bind(t)()}},_videoPlayerControls:function(t,e){SaranyuHlsHTML5Player.Utils.DLOG("inside video controls function received command , "+t+" with value of "+e);var o=this,l=o.mediaElement.videoElement;o.options;switch(t){case"play":try{o.mediaElement.videoElement.saranyuHlsMertics.islive&&"livedvr"!=o.options.content.toLowerCase()&&(l.currentTime=l.duration-3*o.mediaElement.videoElement.saranyuHlsMertics.targetduration)}catch(a){}l.play(),SaranyuHlsHTML5Player.Utils.DLOG(t+" to video player");break;case"pause":l.pause(),SaranyuHlsHTML5Player.Utils.DLOG(t+" to video player");break;case"stop":l.currentTime=0,l.pause(),SaranyuHlsHTML5Player.Utils.DLOG(t+" to video player");break;case"mute":l.muted=!0,SaranyuHlsHTML5Player.Utils.DLOG(t+" to video player");break;case"unmute":l.muted=!1,SaranyuHlsHTML5Player.Utils.DLOG(t+" to video player");break;case"volumechange":l.volume=e,SaranyuHlsHTML5Player.Utils.DLOG(t+" to video player");break;case"seek":l.currentTime=e,l.play(),SaranyuHlsHTML5Player.Utils.DLOG(t+" to video player")}},_getCurrentTime:function(){var t=this,e=t.mediaElement.videoElement;t.options;return e.currentTime},_playcustomPlayList:function(t){SaranyuHlsHTML5Player.Utils.DLOG("Building custom playlist");var e=this;e.mediaElement.videoElement;e._createAndAppendHLStoPlayer(t),e._videoPlayerControls("play")},_isSupportedMSE:function(){return window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},_checkHLS:function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1}};