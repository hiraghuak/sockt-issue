var SaranyuHlsHTML5Player=SaranyuHlsHTML5Player||{};SaranyuHlsHTML5Player.version="0.0.1",SaranyuHlsHTML5Player.players=[],SaranyuHlsHTML5Player.PLUGIN_NAME="Saranyu HLS Video Player",SaranyuHlsHTML5Player.debug=!0,SaranyuHlsHTML5Player.inActivityTimeout=3e3,SaranyuHlsHTML5Player.googleImaSDKURL="//imasdk.googleapis.com/js/sdkloader/ima3.js",SaranyuHlsHTML5Player.googleImaSDKLoaded=!1,SaranyuHlsHTML5Player.maxNonLinearAdHeight=150,SaranyuHlsHTML5Player.bigPlayClickCounter=0,SaranyuHlsHTML5Player.bigPlayClickDELAY=350,SaranyuHlsHTML5Player.bigPlayClickCounterTimer,SaranyuHlsHTML5Player.defaultOptions={debug:"true",type:"video",autoplay:"true",videotitle:"",content:"vod",maintainaspect:"true",titleStrings:{pause:"Pause",play:"Play",replay:"Replay",fullscreenText:"Full Screen",unFullscreenText:"Exit Fullscreen",muteText:"Mute",unmuteText:"Unmute",socialShare:"Share",download:"Download",watchLater:"Watch Later",favourite:"Favourite",videotitle:"VideoTitle",swap:"Swap",guide:"Guide",like:"Like",record:"Record",stop:"Stop",light:"Light",playlist:"Playlist",multiaudio:"Default",subtitles:"OFF"}},SaranyuHlsHTML5Player.Utils={DLOG:function(){SaranyuHlsHTML5Player.debug},secondsToTimeCode:function(t,e,o,l){void 0===o?o=!1:void 0===l&&(l=25);var a=Math.floor(t/3600)%24,n=Math.floor(t/60)%60,r=Math.floor(t%60),i=Math.floor((t%1*l).toFixed(3));a=isNaN(a)?0:a;return n=isNaN(n)?0:n,r=isNaN(r)?0:r,result=(e||a>0?(a<10?"0"+a:a)+":":"")+(n<10?"0"+n:n)+":"+(r<10?"0"+r:r)+(o?":"+(i<10?"0"+i:i):""),result},timeCodeToSeconds:function(t,e,o,l){if(void 0===o?o=!1:void 0===l&&(l=25),t)if(t){var a=t.split(":"),n=0;if(3==a.length)n=60*Number(a[0])*60+60*Number(a[1])+Number(a[2]);else if(2==a.length){n=60*Number(a[0])+Number(a[1])}}else n=0;return n},getWidthInPercentage:function(t){var e=t.parent();return(t.width()/e.width()*100).toFixed(0)+"%"},getHeightInPercentage:function(t){var e=t.parent();return(t.height()/e.height()*100).toFixed(0)+"%"},preventSelectionOfTextInMouseMove:function(t){return t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.returnValue=!1,t},getPercentageForGivenDuration:function(t,e){return t/e*100}},SaranyuHlsHTML5Player.MediaFeatures={init:function(){window.navigator,navigator.userAgent.toLowerCase()}},SaranyuHlsHTML5Player.MediaFeatures.init(),SaranyuHlsHTML5Player.MediaPlayer=function(t,e,o){SaranyuHlsHTML5Player.Utils.DLOG("Constructor",t,e);var l=this;l.masterElementid=t,l.options=e,l.playerType=o,l.$masterContainer=$(t),l._validateParams(e),l.init()},SaranyuHlsHTML5Player.MediaPlayer.prototype={_validateParams:function(t){t.type?(SaranyuHlsHTML5Player.Utils.DLOG("Media Type present. Check if its valid"),$.inArray(t.type,SaranyuHlsHTML5Player.MediaTypes)>-1?(SaranyuHlsHTML5Player.Utils.DLOG("Valid Media Types"),t.file?SaranyuHlsHTML5Player.Utils.DLOG("File Info Present"):SaranyuHlsHTML5Player.Utils.DLOG("File Information Not present")):SaranyuHlsHTML5Player.Utils.DLOG("Unknown Media Type")):SaranyuHlsHTML5Player.Utils.DLOG("Media Type Not present")},init:function(){var t=this;SaranyuHlsHTML5Player.Utils.DLOG("Init Function",t,t.options,t.$masterContainer),t.container=$('<div class="sp-main-container-wrapper"><div class="sp-main-container"><div class="sp-player-inner"><div class="sp-ad-container"></div><div class="sp-media-element"></div><div class="sp-player-layers"></div><div class="sp-full-controls"></div></div></div></div>').appendTo(t.$masterContainer),t.mainContainerWrapper=t.container.find(".sp-main-container-wrapper"),t.mainContainer=t.container.find(".sp-main-container"),t.playerInner=t.container.find(".sp-player-inner"),t.adContainer=t.container.find(".sp-ad-container"),t.mediaElement=t.container.find(".sp-media-element"),t.playerLayers=t.container.find(".sp-player-layers"),t.fullControls=t.container.find(".sp-full-controls"),t._createMediaElement(),t._createFullControls(),t._createIndividualControls(),t._createAndAppendHLStoPlayer(t.options.file[0]),t._hideControlsUnderInactivity(),t._createCustomContextmenu()},_createMediaElement:function(){SaranyuHlsHTML5Player.Utils.DLOG("_createMediaElement function being called");var t=this.mediaElement;navigator.userAgent||navigator.vendor||window.opera;t.append("<video></video>"),this.mediaElement.videoElement=t.find("video")[0]},_createFullControls:function(){var t=this;t.fullControls.append('<div class="sp-controls-top"></div>'),t.fullControls.topContolbar=t.fullControls.find(".sp-controls-top");t.fullControls.append('<div class="sp-controls-bottom"></div>'),t.fullControls.bottomControlBar=t.fullControls.find(".sp-controls-bottom");t.fullControls.bottomControlBar.append('<div class="sp-controls-bottom-progress-bar"></div>'),t.fullControls.bottomControlBar.bottomProgressBar=t.fullControls.find(".sp-controls-bottom-progress-bar");t.fullControls.bottomControlBar.append('<div class="sp-controls-bottom-plyr-controls"></div>'),t.fullControls.bottomControlBar.bottomPlayerControls=t.fullControls.find(".sp-controls-bottom-plyr-controls"),t._createFullControls.hideFullControls=function(){t.fullControls.hide();try{t._buildadvertisement.initializeAd.adStarted&&!t._buildadvertisement.initializeAd.isLinear&&t.adContainer.removeClass("sp-playlist-show")}catch(t){}},t._createFullControls.showFullControls=function(){t.fullControls.show();try{if(t.fullControls.playlistPanel.is(":visible"))try{t._buildadvertisement.initializeAd.adStarted&&!t._buildadvertisement.initializeAd.isLinear&&t.adContainer.addClass("sp-playlist-show")}catch(t){}}catch(t){}try{var e=t.mediaElement.videoElement,o=e.currentTime/e.duration;t._buildprogressbar.adjustCurrentAndHandleInSeek(o)}catch(t){}}},_createIndividualControls:function(){SaranyuHlsHTML5Player.Utils.DLOG("_createcontrols function being called");var t=this.options.features;SaranyuHlsHTML5Player.Utils.DLOG("options pass is "+t);for(featureIndex in t){feature=t[featureIndex];try{this["_build"+feature]&&this["_build"+feature]()}catch(t){}}},_createAndAppendHLStoPlayer:function(t){var e=this,o=e.mediaElement.videoElement,l=t.content_url,a=e.options;t.seekonload?e.options.seekonload=t.seekonload:e.options.seekonload="0",e.mediaElement.videoElement.hlsObj&&e.mediaElement.videoElement.hlsObj.destroy(),e._createAndAppendHLStoPlayer._attachHLStoVideo=function(){Hls.isSupported()?(e.mediaElement.videoElement.saranyuHlsMertics={},e.mediaElement.videoElement.saranyuHlsMertics.playbackRateOld=o.playbackRate,e.mediaElement.videoElement.hlsObj=new Hls,e.mediaElement.videoElement.hlsObj.loadSource(l),e.mediaElement.videoElement.hlsObj.attachMedia(o),e.mediaElement.videoElement.mediaId=t.mediaid,o.playbackRate=e.mediaElement.videoElement.saranyuHlsMertics.playbackRateOld,e.mediaElement.videoElement.hlsObj.on(Hls.Events.ERROR,function(t,o){try{console.log("on error"),console.log(t),console.log(o),e.eventcallbacks.onError(o.details)}catch(t){}}),e.mediaElement.videoElement.hlsObj.on(Hls.Events.MANIFEST_PARSED,function(){if("true"===a.autoplay||!0===a.autoplay){console.log("hls manifest parsed so play now");try{e.eventcallbacks.onPlayStart()}catch(t){}var t=Number(a.seekonload);t>0?setTimeout(function(){e._videoPlayerControls("seek",t)}.bind(e),2e3):(o.play(),e._hideControlsUnderInactivityFirstLaunch())}e.options.features.includes("qualityswitch")&&e._buildqualityswitch._buildQualityPopup(e.mediaElement.videoElement.hlsObj.levels)}),e.mediaElement.videoElement.hlsObj.on(Hls.Events.AUDIO_TRACKS_UPDATED,function(t,o){e.options.features.includes("multiaudio")&&e._buildmultiaudio._buildMultiaudioPopup(e.mediaElement.videoElement.hlsObj.audioTracks)}),e.mediaElement.videoElement.hlsObj.on(Hls.Events.LEVEL_LOADED,function(t,o){e.mediaElement.videoElement.saranyuHlsMertics=o.details,e.mediaElement.videoElement.saranyuHlsMertics.islive=o.details.live})):SaranyuHlsHTML5Player.Utils.DLOG("MSE (Media Source Extension) is not supported in Your Browser")},e._createAndAppendHLStoPlayer._attachDashtoVideo=function(){if(e.mediaElement.videoElement.dashObj)e.mediaElement.videoElement.dashObj.attachSource(t.content_url);else{var a={};e.mediaElement.videoElement.dashObj=dashjs.MediaPlayer().create(),"true"==t.encryption&&(document.documentMode||/Edge/.test(navigator.userAgent)?a["com.microsoft.playready"]={serverURL:t.la_url}:a["com.widevine.alpha"]={serverURL:t.la_url},e.mediaElement.videoElement.dashObj.setProtectionData(a)),e.mediaElement.videoElement.dashObj.initialize(e.mediaElement.videoElement,l,e.options.autoplay),e.mediaElement.videoElement.dashObj.setFastSwitchEnabled(!0),e.mediaElement.videoElement.dashObj.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,function(){var t=e.mediaElement.videoElement.dashObj.getBitrateInfoListFor("video");e.mediaElement.videoElement.dashObj.bitratez=t;try{e._buildqualityswitch._buildQualityPopup(e.mediaElement.videoElement.dashObj.bitratez)}catch(t){}if("true"===e.options.autoplay||!0===e.options.autoplay){console.log("mpd manifest parsed so play now");var l=Number(e.options.seekonload);l>0?setTimeout(function(){e._videoPlayerControls("seek",l)}.bind(e),2e3):(o.play(),e._hideControlsUnderInactivityFirstLaunch())}}.bind(e))}},!e._isSupportedMSE()&&e._checkHLS()?(e.mediaElement.videoElement.src=l,e.mediaElement.videoElement.mediaId=t.mediaid,o.play()):"mp4"==e.playerType?(e.mediaElement.videoElement.src=l,e.mediaElement.videoElement.mediaId=t.mediaid,o.play()):"hls"==e.playerType?(e._createAndAppendHLStoPlayer._attachHLStoVideo(),e.options.autoplay="true"):"mpd"==e.playerType&&e._createAndAppendHLStoPlayer._attachDashtoVideo();try{e.fullControls.topContolbar.videoTitle.changeTitle(t.videotitle)}catch(t){}try{e.playerLayers.poster.changePoster(t.poster)}catch(t){}e.options.features.includes("subtitles")&&e._buildsubtitles._buildSubtitlesPopup(),e.playerInner.trigger("mousemove")},_hideControlsUnderInactivityFirstLaunch:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching logic of hiding controls when there is no user interactivity");var t=this,e=t.mediaElement.videoElement;t.counterToCheckInActivity,t._createFullControls.showFullControls(),clearTimeout(t.counterToCheckInActivity),"true"==t.options.hideControlsWhenInactive&&(t.counterToCheckInActivity=setTimeout(function(){t.fullControls.is(":visible")&&!e.paused&&(t._createFullControls.hideFullControls(),SaranyuHlsHTML5Player.Utils.DLOG("hiding controls because there is no user activity from "+SaranyuHlsHTML5Player.inActivityTimeout+" ms"))},SaranyuHlsHTML5Player.inActivityTimeout))},_hideControlsUnderInactivity:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching logic of hiding controls when there is no user interactivity");var t=this,e=t.mediaElement.videoElement;t.counterToCheckInActivity,t.playerInner.on("mousemove mouseenter mouseover",function(o){t._createFullControls.showFullControls(),clearTimeout(t.counterToCheckInActivity),"true"==t.options.hideControlsWhenInactive&&(t.counterToCheckInActivity=setTimeout(function(){t.fullControls.is(":visible")&&!e.paused&&(t._createFullControls.hideFullControls(),SaranyuHlsHTML5Player.Utils.DLOG("hiding controls because there is no user activity from "+SaranyuHlsHTML5Player.inActivityTimeout+" ms"))},SaranyuHlsHTML5Player.inActivityTimeout))}.bind(t,e))},_createCustomContextmenu:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching custom context menu");this.playerInner.contextmenu(function(t){t.preventDefault(),SaranyuHlsHTML5Player.Utils.DLOG("Right Clicked on player")})},_buildplaypause:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching play pause icon");var t=this,e=t.mediaElement.videoElement;t.fullControls.bottomControlBar.bottomPlayerControls.append('<div class="sp-button sp-play-pause sp-play"><span class="tooltiptext"></span><button class="sp-play-pause-btn"></button></div>'),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-button.sp-play-pause.sp-play"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.tooltip=t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.find(".tooltiptext"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.click(function(o){SaranyuHlsHTML5Player.Utils.DLOG("Clicked on Play Pause Icon"),o.preventDefault(),e.paused?t._videoPlayerControls("play"):t._videoPlayerControls("pause"),e.ended&&t._videoPlayerControls("seek",0),document.activeElement.blur(),e.focus()}),"false"===t.options.autoplay&&(SaranyuHlsHTML5Player.Utils.DLOG("Autoplay false"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.addClass("sp-pause"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-play"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-replay"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.play)),e.addEventListener("play",function(){try{SaranyuHlsHTML5Player.Utils.DLOG("Play triggered"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.addClass("sp-play"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-pause"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-replay"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.pause)}catch(t){}},!1),e.addEventListener("playing",function(){try{SaranyuHlsHTML5Player.Utils.DLOG("Playing triggered"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.addClass("sp-play"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-pause"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-replay"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.pause)}catch(t){}},!1),e.addEventListener("pause",function(){try{SaranyuHlsHTML5Player.Utils.DLOG("Pause triggered"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.addClass("sp-pause"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-play"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-replay"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.play)}catch(t){}},!1),e.addEventListener("ended",function(){try{SaranyuHlsHTML5Player.Utils.DLOG("Re-Play triggered"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.addClass("sp-replay"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-play"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-pause"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.replay),t._createFullControls.showFullControls();var e=t.options.features;for(featureIndex in e)"relatedvideo"==e[featureIndex]&&t.fullControls.relatedPanel.show()}catch(t){}},!1)},_buildvolume:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching volume icon and volume seekbar");var t=this,e=t.mediaElement.videoElement,o=t.options,l='<div class="sp-button sp-volume-btn-wrap sp-unmute"><span class="tooltiptext">'+SaranyuHlsHTML5Player.defaultOptions.titleStrings.muteText+'</span><button class="sp-volume-btn"></button></div>';t.fullControls.bottomControlBar.bottomPlayerControls.append(l),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-button.sp-volume-btn-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.tooltip=t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.find(".tooltiptext");t.fullControls.bottomControlBar.bottomPlayerControls.append('<div class="sp-volume-slider sp-volume-slider-wrap"><div class="sp-volume-current"></div><div class="sp-volume-handle"><span class="tooltiptext"></span></div></div>'),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-volume-slider.sp-volume-slider-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeCurrent=t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.find(".sp-volume-current"),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeHandle=t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.find(".sp-volume-handle"),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeHandle.tooltip=t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeHandle.find(".tooltiptext"),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.writeToVolumeHandleTooltip=function(){t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeHandle.tooltip.html(SaranyuHlsHTML5Player.Utils.getWidthInPercentage(t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeCurrent))},t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.positionVolumeHandle=function(e){t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeCurrent.css("width",100*e+"%"),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeHandle.css("left","calc("+100*e+"% - "+t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.volumeHandle.width()/2+"px)"),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.writeToVolumeHandleTooltip()},t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.handleVolumeMove=function(e){var o=null,l=t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider,a=l.offset(),n=l.width();o=(e.pageX-a.left)/n,o=Math.max(0,o),o=Math.min(o,1),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.positionVolumeHandle(o),t._videoPlayerControls("volumechange",o)},t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.writeToVolumeHandleTooltip(),e.addEventListener("volumechange",function(){try{SaranyuHlsHTML5Player.Utils.DLOG("volume change triggered"),e.muted?(t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.addClass("sp-mute"),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.removeClass("sp-unmute"),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.unmuteText),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.writeToVolumeHandleTooltip()):(t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.addClass("sp-unmute"),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.removeClass("sp-mute"),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.muteText),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.show(),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.writeToVolumeHandleTooltip())}catch(t){}},!1),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.click(function(o){SaranyuHlsHTML5Player.Utils.DLOG("Clicked on voluem button"),o.preventDefault(),e.muted?t._videoPlayerControls("unmute"):t._videoPlayerControls("mute")}),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.bind("mouseover",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.mouseIsOver=!0}).bind("mousemove",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.playerInner.trigger("mousemove"),1==t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.mouseIsDown&&t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.handleVolumeMove(e)}).bind("mouseup",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.mouseIsDown=!1}).bind("mousedown",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.handleVolumeMove(e),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.mouseIsDown=!0}).bind("mouseleave",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.mouseIsDown=!1}),"true"!==o.mute&&1!=o.mute||(t._videoPlayerControls("mute"),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.addClass("sp-mute"),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.removeClass("sp-unmute"),t.fullControls.bottomControlBar.bottomPlayerControls.volumebtn.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.unmuteText),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.hide()),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.addClass("firefox")},_buildprogressbar:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching progressbar");var t=this,e=t.mediaElement.videoElement;function o(o){var l,a=t.fullControls.bottomControlBar.bottomProgressBar.progressbar,n=a.offset(),r=a.width(),i=o.pageX-n.left;percentage=i/r;var s=100*percentage+"%";if((l=percentage*e.duration)<0||l>e.duration||isNaN(l))t.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.show();else{var d,u,m,p;t.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.html(SaranyuHlsHTML5Player.Utils.secondsToTimeCode(l)),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.css("left",s),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.show();var b=0;if(d=t.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.offset().left,(u=t.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.outerWidth())+d>(m=t.fullControls.bottomControlBar.bottomProgressBar.progressbar.offset().left)+(p=t.fullControls.bottomControlBar.bottomProgressBar.progressbar.outerWidth()))b=p-u,t.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.css("left",b+"px"),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.show();try{if(t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.parseAndCalculateCordinates.thumbnailsMetaData){var C,y;t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.renderingThumbnailPreview(l),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.css("left",s),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.show();var c=0;if(C=t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.offset().left,(y=t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.outerWidth())+C>m+p)c=p-y,t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.css("left",c+"px"),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.show()}}catch(o){}}}function l(){t.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat.hide(),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.hide()}function a(l){var a,n=t.fullControls.bottomControlBar.bottomProgressBar.progressbar,r=n.offset(),i=n.width(),s=l.pageX-r.left;percentage=s/i,(a=percentage*e.duration)<0||a>e.duration||isNaN(a)||(e.ended&&e.paused&&(t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.addClass("sp-pause"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-play"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-replay"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.play),t.playerLayers.bigreplay.hide(),t.playerLayers.bigplay.show()),t._videoPlayerControls("seek",a),t._buildprogressbar.adjustCurrentAndHandleInSeek(percentage),o(l))}t.fullControls.bottomControlBar.bottomProgressBar.append('<div class="sp-progress-bar-time-rail"><span class="sp-progress-bar-buffering"></span><span class="sp-progress-bar-loaded"></span><span class="sp-progress-bar-current"></span><span class="sp-progress-bar-cues"></span><span class="sp-progress-bar-handle"></span><span class="sp-progress-bar-timefloat"></span><span class="sp-progress-bar-seekbar-preview"></span></div>'),t.fullControls.bottomControlBar.bottomProgressBar.progressbar=t.fullControls.bottomControlBar.bottomProgressBar.find(".sp-progress-bar-time-rail"),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.buffering=t.fullControls.bottomControlBar.bottomProgressBar.find(".sp-progress-bar-buffering"),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.loaded=t.fullControls.bottomControlBar.bottomProgressBar.find(".sp-progress-bar-loaded"),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.current=t.fullControls.bottomControlBar.bottomProgressBar.find(".sp-progress-bar-current"),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle=t.fullControls.bottomControlBar.bottomProgressBar.find(".sp-progress-bar-handle"),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.timefloat=t.fullControls.bottomControlBar.bottomProgressBar.find(".sp-progress-bar-timefloat"),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer=t.fullControls.bottomControlBar.bottomProgressBar.find(".sp-progress-bar-seekbar-preview"),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.cues=t.fullControls.bottomControlBar.bottomProgressBar.find(".sp-progress-bar-cues"),t._buildprogressbar.adjustCurrentAndHandleInSeek=function(e){if(!(e<0||e>1)){var o,l,a,n,r=100*e+"%",i=t.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.width()/2;t.fullControls.bottomControlBar.bottomProgressBar.progressbar.current.width(r),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.css("left","calc("+r+" - "+i+"px)");if(o=t.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.offset().left,l=t.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.width(),a=t.fullControls.bottomControlBar.bottomProgressBar.progressbar.offset().left,n=t.fullControls.bottomControlBar.bottomProgressBar.progressbar.width(),o<a){var s=0;t.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.css("left",s+"px")}else if(l+o>a+n){s=n-l,i=t.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.width(),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.css("left","calc("+r+" - "+i+"px)")}}},t.fullControls.bottomControlBar.bottomProgressBar.progressbar.bind("mouseover",function(e){o(e),e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.mouseIsOver=!0}).bind("mousemove",function(e){o(e),e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),1==t.fullControls.bottomControlBar.bottomProgressBar.progressbar.mouseIsDown&&a(e)}).bind("mouseup",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.mouseIsDown=!1}).bind("mousedown",function(e){a(e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e)),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.mouseIsDown=!0}).bind("mouseleave",function(e){l(),e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.mouseIsDown=!1}),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.saranyuHammer({drag_max_touches:0}).on("touch drag",function(e){var l=e.gesture.touches;e.gesture.preventDefault(),o(e);for(var n=0,r=l.length;n<r;n++)t.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.mouseIsDown=!0,a(l[n])}).on("release",function(e){a(e),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.mouseIsDown=!1,l()}).on("mouseleave",function(e){t.fullControls.bottomControlBar.bottomProgressBar.progressbar.handle.mouseIsDown=!1}),e.addEventListener("timeupdate",function(e){var o=t.mediaElement.videoElement,l=o.currentTime/o.duration;t._buildprogressbar.adjustCurrentAndHandleInSeek(l)}.bind(t)),e.addEventListener("progress",function(e){for(var o,l=t.mediaElement.videoElement,a=0,n=0;n<l.buffered.length;n++)l.currentTime>=l.buffered.start(n)&&l.currentTime<=l.buffered.end(n)&&(a=l.buffered.end(n)/l.duration);o=a,t.fullControls.bottomControlBar.bottomProgressBar.progressbar.loaded.width(100*o+"%")}.bind(t))},_buildseekbarpreview:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching seekbar preview");var t=this;t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.append('<img class="sp-progress-bar-seekbar-preview-img" />'),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.seekbarPreviewContainerImgTag=t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.find(".sp-progress-bar-seekbar-preview-img"),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.parseAndCalculateCordinates=function(e){if(t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.parseAndCalculateCordinates.thumbnailsMetaData=[],""!=e){var o=e.split("\n\r\n");o.length<=1&&(o=e.split("\n\n")),$.each(o,function(e,l){var a,n,r,i,s,d,u=o[e].split("\n");if(void 0!=u[0]&&""!=u[0]&&"webvtt"!=u[0].toLowerCase()){var m=u[0].split("--\x3e");a=SaranyuHlsHTML5Player.Utils.timeCodeToSeconds(m[0]),n=SaranyuHlsHTML5Player.Utils.timeCodeToSeconds(m[1])}if(void 0!=u[1]&&""!=u[1]&&"webvtt"!=u[1].toLowerCase()){var p=u[1].split("#");d=p[0];var b=p[1].split("=")[1].split(",");i="-"+b[0]+"px",s="-"+b[1]+"px",r=b[2]+"px";var C={startTime:a,endTime:n,imgxPos:i,imgyPos:s,imgHeight:b[3]+"px",imgWidth:r,imgSrc:d};t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.parseAndCalculateCordinates.thumbnailsMetaData.push(C)}})}},t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.ajaxForVtt=function(e){t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.ajaxForVtt.abort=function(){t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.ajax.abort()};try{t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.ajaxForVtt.abort()}catch(t){}t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.ajax=$.ajax({type:"GET",url:e}).done(function(e){t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.parseAndCalculateCordinates(e)}.bind(t))},t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.renderingThumbnailPreview=function(e){t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.parseAndCalculateCordinates.thumbnailsMetaData.length>1&&$.each(t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.parseAndCalculateCordinates.thumbnailsMetaData,function(o,l){e>=l.startTime&&e<=l.endTime&&($(t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.seekbarPreviewContainerImgTag).attr("src",l.imgSrc),$(t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.seekbarPreviewContainerImgTag).css("height",l.imgHeight),$(t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.seekbarPreviewContainerImgTag).css("width",l.imgWidth),$(t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.seekbarPreviewContainerImgTag).css("object-position",l.imgxPos+" "+l.imgyPos))})},t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.ajaxForVtt(t.options.file[0].thumbnails)},_buildfullscreen:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching fullscreen icon");var t=this;t.isFullScreen=!1;var e='<div class="sp-button sp-fullscreen-unfullscreen sp-fullscreen"><span class="tooltiptext">'+SaranyuHlsHTML5Player.defaultOptions.titleStrings.fullscreenText+'</span><button class="sp-fullscreen-btn"></button></div>';t.fullControls.bottomControlBar.bottomPlayerControls.append(e),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-button.sp-fullscreen-unfullscreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.tooltip=t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.find(".tooltiptext"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.fullScreenChanges=function(){t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.addClass("sp-unfullscreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.removeClass("sp-fullscreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.unFullscreenText)},t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.unFullScreenChanges=function(){t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.addClass("sp-fullscreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.removeClass("sp-unfullscreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.fullscreenText),t.playerInner.trigger("mousemove")},t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.launchIntoFullscreen=function(){var e=t.playerInner[0];e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),checkMobile()&&screen.orientation.lock("landscape")},t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.exitFullscreen=function(t){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.toggleFullscreen=function(){t.isFullScreen?(SaranyuHlsHTML5Player.Utils.DLOG("Exit FullScreen Mode"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.exitFullscreen(),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.unFullScreenChanges(),t.playerInner.removeClass("sp-is-fullscreen"),t.isFullScreen=!1):(SaranyuHlsHTML5Player.Utils.DLOG("FullScreen Mode"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.launchIntoFullscreen(),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.fullScreenChanges(),t.playerInner.addClass("sp-is-fullscreen"),t.isFullScreen=!0)},t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.click(function(e){e.preventDefault(),SaranyuHlsHTML5Player.Utils.DLOG("Clicked on FullScreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.toggleFullscreen()}),$(document).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(){setTimeout(function(){t.playerInner.height()==window.innerHeight&&t.playerInner.width()==window.innerWidth||(t.isFullScreen=!1,t.playerInner.removeClass("sp-is-fullscreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.unFullScreenChanges())}.bind(t),400)}).bind(t),t.playerInner.keyup(function(e){27==e.keyCode&&setTimeout(function(){t.isFullScreen&&(t.isFullScreen=!1,t.playerInner.removeClass("sp-is-fullscreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.unFullScreenChanges())}.bind(t),500)})},_buildclosebtn:function(){console.log("closeBtn..."),SaranyuHlsHTML5Player.Utils.DLOG("Attaching close icon");var t=this,e=t.mediaElement.videoElement;t.fullControls.bottomControlBar.bottomPlayerControls.append('<div class="sp-close-button"><span class="tooltiptext"></span><button class="sp-close-btn"></button></div>'),t.fullControls.bottomControlBar.bottomPlayerControls.closeBtn=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-close-button .sp-close-btn"),t.fullControls.bottomControlBar.bottomPlayerControls.closeBtn.tooltip=t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.find(".tooltiptext"),t.fullControls.bottomControlBar.bottomPlayerControls.closeBtn.click(function(t){console.log("close button clicked"),SaranyuHlsHTML5Player.Utils.DLOG("Clicked on close Icon"),t.preventDefault(),document.getElementById("video_player").remove(),document.activeElement.blur(),e.focus()})},_buildtime:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching time");var t=this,e=t.mediaElement.videoElement;t.fullControls.bottomControlBar.bottomPlayerControls.append('<div class="sp-player-time"><span class="sp-plyr-currenttime">00:00</span>&nbsp;/&nbsp;<span class="sp-plyr-duration">00:00</span></div>'),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlayerTime=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-player-time"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlayerTime.currentTime=t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlayerTime.find(".sp-plyr-currenttime"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlayerTime.duration=t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlayerTime.find(".sp-plyr-duration"),e.addEventListener("timeupdate",function(o){t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlayerTime.currentTime.html(SaranyuHlsHTML5Player.Utils.secondsToTimeCode(e.currentTime)),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlayerTime.duration.html(SaranyuHlsHTML5Player.Utils.secondsToTimeCode(e.duration))}.bind(t)),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlayerTime.addClass("firefox")},_buildlogo:function(){console.log("Attaching logo");var t=this;t.mediaElement.videoElement,t.options;t.fullControls.bottomControlBar.bottomPlayerControls.append('<div class="sp-logo-switch sp-logo-switch-wrap"><button class="sp-logo-switch-btn"></button><div class="sp-logo-switch-wrap sp-logo-switch-popup-wrap"></div></div>'),t.fullControls.bottomControlBar.bottomPlayerControls.logo=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-logo-switch-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.logo.button=t.fullControls.bottomControlBar.bottomPlayerControls.logo.find(".sp-logo-switch-btn")},_buildnxplayback:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching nxplayback");var t=this,e=t.mediaElement.videoElement,o=t.options;t.fullControls.bottomControlBar.bottomPlayerControls.append('<div class="sp-nxplayback-switch sp-nxplayback-switch-wrap"><button class="sp-nxplayback-switch-btn"></button><div class="sp-nxplayback-switch-wrap sp-nxplayback-switch-popup-wrap"></div></div>'),t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-nxplayback-switch-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.button=t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.find(".sp-nxplayback-switch-btn"),t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.popup=t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.find(".sp-nxplayback-switch-popup-wrap"),$.each(o.nxplayback,function(o,l){var a,n;"true"===l.default.toLowerCase()||1==l.default?(t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.button.html(l.label),e.playbackRate=l.speed,n="active"):n="inactive",a="<div><button class="+n+" type='button' label="+l.label+" speed="+l.speed+">"+l.label+"</button></div>",t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.popup.append(a).find("button").unbind().click(function(e){var o=$(e.target).attr("speed"),l=$(e.target).attr("label"),a=t.mediaElement.videoElement;a.playbackRate=o,a.muted=1!=o,$(e.target).parent().parent().find(".active").removeClass("active").addClass("inactive"),$(e.target).addClass("active").removeClass("inactive"),t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.button.html(l),t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.popup.hide(),SaranyuHlsHTML5Player.Utils.DLOG("video playback speed changed to "+o+"x or label "+l)}.bind(t))}),t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.button.unbind().click(function(e){t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.popup.toggle(),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.hide(),t.fullControls.playlistPanel.hide()}.bind(t))},_buildqualityswitch:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching qualityswitch");var t=this;t.mediaElement.videoElement,t.options;t.fullControls.bottomControlBar.bottomPlayerControls.append('<div class="sp-quality-switch sp-quality-switch-wrap"><button class="sp-quality-switch-btn"></button><div class="sp-quality-switch-wrap sp-quality-switch-popup-wrap"></div></div>'),t.fullControls.bottomControlBar.bottomPlayerControls.quality=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-quality-switch-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.quality.button=t.fullControls.bottomControlBar.bottomPlayerControls.quality.find(".sp-quality-switch-btn"),t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup=t.fullControls.bottomControlBar.bottomPlayerControls.quality.find(".sp-quality-switch-popup-wrap"),t._buildqualityswitch._buildQualityPopup=function(e){function o(e){e.find("button").unbind().click(function(e){var o=Number($(e.target).attr("index")),l=$(e.target).html();t.mediaElement.videoElement;"hls"==t.playerType?t.mediaElement.videoElement.hlsObj.currentLevel=o:"mpd"==t.playerType&&(-1==o?t.mediaElement.videoElement.dashObj.setAutoSwitchQuality(!0):(t.mediaElement.videoElement.dashObj.setAutoSwitchQuality(!1),t.mediaElement.videoElement.dashObj.setQualityFor("video",t.mediaElement.videoElement.dashObj.bitratez[o].qualityIndex))),$(e.target).parent().parent().find(".active").removeClass("active").addClass("inactive"),$(e.target).addClass("active").removeClass("inactive"),t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.hide(),SaranyuHlsHTML5Player.Utils.DLOG("quality index changed to "+o+"x or label "+l)}.bind(t))}if(t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.empty(),SaranyuHlsHTML5Player.Utils.DLOG("Attaching qualityswitch popup elements"),e.length>1)"mpd"==t.playerType?$.each(e,function(e,l){SaranyuHlsHTML5Player.Utils.DLOG("Attaching quality switching with bit rate of "+(l.bitrate/1024).toFixed(0)+" Kbps");var a="",n="inactive",r=t.options.qualityswitch.label,i=(l.bitrate/1024).toFixed(0),s=l.height+"p";t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.children().length||(classActiveOrInactive="active",a="<div><button class=active type='button' label="+r+" index="+-1+">"+r+"</button></div>"),"both"==t.options.qualityswitch.metric?a+="<div><button class="+n+" type='button' label="+i+" index="+t.mediaElement.videoElement.dashObj.bitratez[e].qualityIndex+">"+s+"&nbsp;/&nbsp;"+i+"</button></div>":"resolution"==t.options.qualityswitch.metric?a+="<div><button class="+n+" type='button' label="+i+" index="+t.mediaElement.videoElement.dashObj.bitratez[e].qualityIndex+">"+s+"</button></div>":"bitrate"==t.options.qualityswitch.metric&&(a+="<div><button class="+n+" type='button' label="+i+" index="+t.mediaElement.videoElement.dashObj.bitratez[e].qualityIndex+">"+i+" kbps</button></div>"),o(t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.append(a))}):"hls"==t.playerType&&$.each(e,function(e,l){SaranyuHlsHTML5Player.Utils.DLOG("Attaching quality switching with bit rate of "+(l.bitrate/1024).toFixed(0)+" Kbps");var a="",n="inactive",r=t.options.qualityswitch.label,i=(l.bitrate/1024).toFixed(0),s=l.height+"p";t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.children().length||(classActiveOrInactive="active",a="<div class=active ><button class=active type='button' label="+r+" index="+-1+">"+r+"</button></div>"),"both"==t.options.qualityswitch.metric?a+="<div class="+n+"><button class="+n+" type='button' label="+i+" index="+e+">"+i+" kbps / "+s+"</button></div>":"resolution"==t.options.qualityswitch.metric?a+="<div><button class="+n+" type='button' label="+i+" index="+e+">"+s+"</button></div>":"bitrate"==t.options.qualityswitch.metric&&(a+="<div class="+n+"><button class="+n+" type='button' label="+i+" index="+e+">"+i+" kbps</button></div>"),o(t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.append(a))});else{SaranyuHlsHTML5Player.Utils.DLOG("Attaching quality switching Auto only , if there is just one quality");var l,a=t.options.qualityswitch.label;classActiveOrInactive="active",l="<div><button class=active type='button' label="+a+" index="+-1+">"+a+"</button></div>",o(t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.append(l))}},t.fullControls.bottomControlBar.bottomPlayerControls.quality.button.unbind().click(function(e){try{t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.children().length>0?(t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.toggle(),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.hide(),t.fullControls.playlistPanel.hide()):t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.hide()}catch(t){}}.bind(t))},_buildmultiaudio:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching multiaudio tracks");var t=this;t.mediaElement.videoElement,t.options;t.fullControls.bottomControlBar.bottomPlayerControls.append('<div class="sp-multiaudio-switch sp-multiaudio-switch-wrap"><button class="sp-multiaudio-switch-btn"></button><div class="sp-multiaudio-switch-wrap sp-multiaudio-switch-popup-wrap"></div></div>'),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-multiaudio-switch-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.button=t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.find(".sp-multiaudio-switch-btn"),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup=t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.find(".sp-multiaudio-switch-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.button.html("Audio"),t._buildmultiaudio._buildMultiaudioPopup=function(e){if(t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.empty(),SaranyuHlsHTML5Player.Utils.DLOG("Attaching multiaudio popup elements"),e.length>1){var o=e[0].groupId;$.each(e,function(e,l){SaranyuHlsHTML5Player.Utils.DLOG("Attaching multiaudio switching with name of "+l.name);var a="",n=SaranyuHlsHTML5Player.defaultOptions.titleStrings.multiaudio,r=l.name;l.groupId==o&&(t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.children().length||(classActiveOrInactive="active",a="<div><button class=active type='button' label="+n+" index=0>"+n+"</button></div>"),a+="<div><button class=inactive type='button' label="+r+" index="+e+">"+r+"</button></div>",t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.append(a).find("button").unbind().click(function(e){var o=Number($(e.target).attr("index")),l=$(e.target).html();t.mediaElement.videoElement,t.mediaElement.videoElement.hlsObj.audioTrack=o,$(e.target).parent().parent().find(".active").removeClass("active").addClass("inactive"),$(e.target).addClass("active").removeClass("inactive"),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.hide(),SaranyuHlsHTML5Player.Utils.DLOG("multiaudio index changed to "+o+"x or label "+l)}.bind(t)))})}},t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.button.unbind().click(function(e){t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.children().length>0?(t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.toggle(),t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.toggle(),t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.hide(),t.fullControls.playlistPanel.hide()):t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.hide()}.bind(t))},_buildsubtitles:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching subtitles tracks");var t=this;t.mediaElement.videoElement,t.options;t.fullControls.bottomControlBar.bottomPlayerControls.append('<div class="sp-subtitles-switch sp-subtitles-switch-wrap"><button class="sp-subtitles-switch-btn"></button><div class="sp-subtitles-switch-wrap sp-subtitles-switch-popup-wrap"></div></div>'),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-subtitles-switch-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.button=t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.find(".sp-subtitles-switch-btn"),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup=t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.find(".sp-subtitles-switch-wrap");t.mediaElement.append('<div class="sp-subtitles-panel"></div>'),t.mediaElement.subtitlesPanel=t.mediaElement.find(".sp-subtitles-panel"),t.mediaElement.subtitlesPanel.subtitlesArray=[],t._buildsubtitles.hideSubTitlesContainer=function(){t.mediaElement.subtitlesPanel.hide()},t._buildsubtitles.showSubTitlesContainer=function(){t.mediaElement.subtitlesPanel.html().length>1?t.mediaElement.subtitlesPanel.show():t.mediaElement.subtitlesPanel.hide()},t._buildsubtitles.hideSubTitlesContainer(),t._buildsubtitles._buildSubtitlesPopup=function(e){var o=0;function l(e){e.find("button").unbind().click(function(e){var l=Number($(e.target).attr("index")),a=$(e.target).html();t.mediaElement.videoElement;!function(e){if(SaranyuHlsHTML5Player.Utils.DLOG(e+" uday 2 Check playlist index for subtitles "+o),isNaN(e))return t.mediaElement.subtitlesPanel.subtitlesArray=[],!1;t.mediaElement.subtitlesPanel.subtitlesArray=[],$.ajax({url:t.options.file[0].subtitles[0].file,context:t,contentType:"text/html",success:function(t){var e=this;function o(t){return t.replace(/^\s+|\s+$/g,"")}var l=t.replace(/\r\n|\r|\n/g,"\n"),a=(l=o(l)).split("\n\n"),n=0;for(s in a){var r=a[s].split("\n");if(r.length>=2){var i=r[0],d=o(r[1].split(" --\x3e ")[0]),u=o(r[1].split(" --\x3e ")[1]),m=r[2];if(r.length>2)for(j=3;j<r.length;j++)m+="\n"+r[j];e.mediaElement.subtitlesPanel.subtitlesArray[n]={},e.mediaElement.subtitlesPanel.subtitlesArray[n].number=i,e.mediaElement.subtitlesPanel.subtitlesArray[n].start=d,e.mediaElement.subtitlesPanel.subtitlesArray[n].end=u,e.mediaElement.subtitlesPanel.subtitlesArray[n].text=m}n++}}})}(l),$(e.target).parent().parent().find(".active").removeClass("active").addClass("inactive"),$(e.target).addClass("active").removeClass("inactive"),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.hide(),SaranyuHlsHTML5Player.Utils.DLOG("subtitles index changed to "+l+"x or label "+a)}.bind(t))}if(void 0!==t.fullControls.playlistPanel&&(t.fullControls.playlistPanel.playingIndex,1)&&(o=t.fullControls.playlistPanel.playingIndex),SaranyuHlsHTML5Player.Utils.DLOG("Check playlist index for subtitles"+o),console.log("Check playlist index for subtitles"+o+t.options.file[o].subtitles),e=t.options.file[o].subtitles,t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.empty(),SaranyuHlsHTML5Player.Utils.DLOG("Attaching subtitles popup elements"+t.mediaElement.subtitlesPanel.subtitlesArray.length),t.mediaElement.subtitlesPanel.subtitlesArray=[],SaranyuHlsHTML5Player.Utils.DLOG("check subtitle length"+t.mediaElement.subtitlesPanel.subtitlesArray.length),void 0!=e)"string"==typeof e[0].file&&$.each(e,function(e,o){SaranyuHlsHTML5Player.Utils.DLOG("Attaching subtitles switching with name of "+o.lang);var a="",n=SaranyuHlsHTML5Player.defaultOptions.titleStrings.subtitles,r=o.lang;t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.children().length||(classActiveOrInactive="active",a="<div><button class=active type='button' label="+n+" index=no>"+n+"</button></div>"),a+="<div><button class=inactive type='button' label="+r+" index="+e+">"+r+"</button></div>",l(t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.append(a))});else{SaranyuHlsHTML5Player.Utils.DLOG("Attaching multiaudio switching Auto only , if there is just one audio");var a,n=SaranyuHlsHTML5Player.defaultOptions.titleStrings.subtitles;classActiveOrInactive="active",a="<div><button class=active type='button' label="+n+" index=no>"+n+"</button></div>",l(t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.append(a))}},t.mediaElement.videoElement.addEventListener("timeupdate",function(){function e(t){var e=t.split(":");return 60*+e[0]*60+60*+e[1]+ +e[2]}!function(){var o=Math.floor(Number(t.mediaElement.videoElement.currentTime));if(t.mediaElement.subtitlesPanel.subtitlesArray.length>0)for(var l=0;l<t.mediaElement.subtitlesPanel.subtitlesArray.length;l++){var a=e(t.mediaElement.subtitlesPanel.subtitlesArray[l].start.split(",")[0]),n=e(t.mediaElement.subtitlesPanel.subtitlesArray[l].end.split(",")[0]);if(o>=a&&o<=n)return t._buildsubtitles.showSubTitlesContainer(),void t.mediaElement.subtitlesPanel.html(t.mediaElement.subtitlesPanel.subtitlesArray[l].text)}t._buildsubtitles.hideSubTitlesContainer()}()}),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.button.unbind().click(function(e){try{t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.children().length>0?(t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.toggle(),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.hide(),t.fullControls.playlistPanel.hide()):t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.hide()}catch(t){}}.bind(t))},_buildplaylist:function(){SaranyuHlsHTML5Player.Utils.DLOG("Building playlist");var t=this,e=(t.mediaElement.videoElement,'<div class="sp-button sp-playlist-button-wrap sp-playlist-inactive"><span class="tooltiptext">'+SaranyuHlsHTML5Player.defaultOptions.titleStrings.playlist+'</span><button class="sp-playlist-btn"></button></div>');t.fullControls.bottomControlBar.bottomPlayerControls.append(e),t.fullControls.bottomControlBar.bottomPlayerControls.playlist=t.fullControls.bottomControlBar.bottomPlayerControls.find(".sp-playlist-button-wrap"),t.fullControls.bottomControlBar.bottomPlayerControls.playlist.button=t.fullControls.bottomControlBar.bottomPlayerControls.playlist.find(".sp-playlist-btn");t.fullControls.append('<div class="sp-playlist-panel"></div>'),t.fullControls.playlistPanel=t.fullControls.find(".sp-playlist-panel"),t.fullControls.playlistPanel.playingIndex=0;t.fullControls.playlistPanel.append('<span class="sp-playlist-panel-left-btn"></span>'),t.fullControls.playlistPanel.append('<span class="sp-playlist-panel-right-btn"></span>'),t.fullControls.playlistPanel.playlistLeftButton=t.fullControls.find(".sp-playlist-panel-left-btn"),t.fullControls.playlistPanel.playlistRightButton=t.fullControls.find(".sp-playlist-panel-right-btn");t.fullControls.playlistPanel.append('<div class="sp-playlist-panel-itemview"></div>'),t.fullControls.playlistPanel.playlistItemView=t.fullControls.find(".sp-playlist-panel-itemview"),$.each(t.options.file,function(e,o){var l;l=0==e?'<div class="item sp-playlist-active-item sp-playlist-item" indexoftile="'+e+'"><img class="sp-playlist-item-img" src="'+t.options.file[e].poster+'"><span class="sp-playlist-item-videotitle">'+t.options.file[e].videotitle+"</span></div>":'<div class="item sp-playlist-item" indexoftile="'+e+'"><img class="sp-playlist-item-img" src="'+t.options.file[e].poster+'"><span class="sp-playlist-item-videotitle">'+t.options.file[e].videotitle+"</span></div>",t.fullControls.playlistPanel.playlistItemView.append(l)}),t.fullControls.playlistPanel.playlistItemView.saranyuOwlCarousel=$(t.fullControls.playlistPanel.playlistItemView),t.fullControls.playlistPanel.playlistItemView.saranyuOwlCarousel.saranyuOwlCarousel({margin:10,items:5,loop:!1,afterAction:function(){this.itemsAmount>this.visibleItems.length?(t.fullControls.playlistPanel.playlistLeftButton.show(),t.fullControls.playlistPanel.playlistRightButton.show(),0==this.currentItem&&t.fullControls.playlistPanel.playlistLeftButton.hide(),this.currentItem==this.maximumItem&&t.fullControls.playlistPanel.playlistRightButton.hide()):(t.fullControls.playlistPanel.playlistLeftButton.hide(),t.fullControls.playlistPanel.playlistRightButton.hide())}}),t.fullControls.playlistPanel.removeActiveClass=function(){$.each(t.fullControls.playlistPanel.find(".sp-playlist-item"),function(t,e){$(e).removeClass("sp-playlist-active-item")})},t.fullControls.playlistPanel.addActiveClass=function(e){$.each(t.fullControls.playlistPanel.find(".sp-playlist-item"),function(t,o){t==e&&$(o).addClass("sp-playlist-active-item")})},t.fullControls.playlistPanel.buildAdCuesAfterPlaylistUpdate=function(){try{t._buildadvertisement._buildadcue.constructed=!1}catch(t){}t.mediaElement.videoElement.addEventListener("timeupdate",function(){"true"!=t.options.advertisement.cues||isNaN(t.mediaElement.videoElement.duration)||"vod"!=t.options.content||t._buildadvertisement._buildadcue.constructed||t._buildadvertisement._buildadcue()})},t.fullControls.playlistPanel.updateNewPlaylistStats=function(e){console.log("Clicked on item "+e),console.log("playingIndex "+t.fullControls.playlistPanel.playingIndex),t.fullControls.playlistPanel.playingIndex=e,console.log("playingIndex "+t.fullControls.playlistPanel.playingIndex),t._createAndAppendHLStoPlayer(t.options.file[e]),t.fullControls.playlistPanel.removeActiveClass(),t.fullControls.playlistPanel.addActiveClass(e),t.fullControls.playlistPanel.playingIndex=e,t.fullControls.playlistPanel.buildAdCuesAfterPlaylistUpdate()},t.fullControls.playlistPanel.find(".sp-playlist-item").click(function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e);var o=$(this).attr("indexoftile");SaranyuHlsHTML5Player.Utils.DLOG("Clicked on item "+o),t.fullControls.playlistPanel.updateNewPlaylistStats(o),t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.seekbarPreviewContainerImgTag&&t.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.ajaxForVtt(t.options.file[o].thumbnails)}),t.fullControls.bottomControlBar.bottomPlayerControls.playlist.button.click(function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),SaranyuHlsHTML5Player.Utils.DLOG("Clicked on playlist button"),t.fullControls.playlistPanel.toggle(),t._buildadvertisement.initializeAd.adStarted&&!t._buildadvertisement.initializeAd.isLinear&&t.adContainer.toggleClass("sp-playlist-show"),t.fullControls.bottomControlBar.bottomPlayerControls.multiaudio.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.subtitles.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.quality.popup.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.nxplayback.popup.hide()}),t.fullControls.playlistPanel.playlistLeftButton.click(function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),SaranyuHlsHTML5Player.Utils.DLOG("Clicked on prev playlist button"),t.fullControls.playlistPanel.playlistItemView.saranyuOwlCarousel.trigger("owl.prev")}),t.fullControls.playlistPanel.playlistRightButton.click(function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),SaranyuHlsHTML5Player.Utils.DLOG("Clicked on next playlist button"),t.fullControls.playlistPanel.playlistItemView.saranyuOwlCarousel.trigger("owl.next")}),t.mediaElement.videoElement.addEventListener("ended",function(){if("true"===t.options.autoplay||1==t.options.autoplay){var e=Number(t.fullControls.playlistPanel.playingIndex)+1;e<t.options.file.length?(SaranyuHlsHTML5Player.Utils.DLOG("video ended choosing next playlist index "+e),t.fullControls.playlistPanel.updateNewPlaylistStats(e)):SaranyuHlsHTML5Player.Utils.DLOG("video ended choosing next playlist index is not present so ending playlist "+e)}else SaranyuHlsHTML5Player.Utils.DLOG("player will be in replay mode and it will play same file")})},_buildrelatedvideo:function(t){SaranyuHlsHTML5Player.Utils.DLOG("Building related video");var e=this,o=e.mediaElement.videoElement;e.fullControls.append('<div class="sp-related-panel"></div>'),e.fullControls.relatedPanel=e.fullControls.find(".sp-related-panel"),e.fullControls.relatedPanel.boolz=t,e.fullControls.relatedPanel.boolz?e.fullControls.relatedPanel.relatedVideosDisplayTimerCount=10:e.fullControls.relatedPanel.relatedVideosDisplayTimerCount=0,e.fullControls.relatedPanel.playingIndex="";e.fullControls.relatedPanel.append('<span class="sp-related-panel-titletext">Up Next</span>');e.fullControls.relatedPanel.append('<span class="sp-related-panel-left-btn"></span>'),e.fullControls.relatedPanel.append('<span class="sp-related-panel-right-btn"></span>'),e.fullControls.relatedPanel.relatedLeftButton=e.fullControls.find(".sp-related-panel-left-btn"),e.fullControls.relatedPanel.relatedRightButton=e.fullControls.find(".sp-related-panel-right-btn");if(e.fullControls.relatedPanel.append('<div class="sp-related-panel-itemview"></div>'),e.fullControls.relatedPanel.relatedItemView=e.fullControls.find(".sp-related-panel-itemview"),"false"==e.options.relatedvideoautoplay){$.each(e.options.relatedvideos,function(t,o){var l;l=0==t?'<div class="item sp-related-active-item sp-related-item" indexoftile="'+t+'"><img class="sp-related-item-img" src="'+e.options.relatedvideos[t].poster+'"><span class="sp-related-item-videotitle" style="display:none;" >'+e.options.relatedvideos[t].videotitle+"</span></div>":'<div class="item sp-related-item" indexoftile="'+t+'"><img class="sp-related-item-img" src="'+e.options.relatedvideos[t].poster+'"><span class="sp-related-item-videotitle" style="display:none;">'+e.options.relatedvideos[t].videotitle+"</span></div>",e.fullControls.relatedPanel.relatedItemView.append(l)});var l=[[0,1],[366,1],[732,2],[1098,3],[1464,4]]}else{var a;console.log("only 1 related video------");a='<div class="item sp-related-item" indexoftile="0"><img class="sp-related-item-img" src="'+e.options.relatedvideos[0].poster+'"></div>',e.fullControls.relatedPanel.relatedItemView.append(a);var n='<span class="sp-related-panel-autotext">'+e.options.relatedvideos[0].videotitle+'</span><span class="sp-related-panel-autotext1">Will automatically load in <span class="timer">10</span> seconds</span>';e.fullControls.relatedPanel.append(n);l=[[0,2],[440,3],[768,4],[1366,5]]}e.fullControls.relatedPanel.relatedItemView.saranyuOwlCarousel=$(e.fullControls.relatedPanel.relatedItemView),e.fullControls.relatedPanel.relatedItemView.saranyuOwlCarousel.saranyuOwlCarousel({itemsCustom:l,loop:!1,afterAction:function(){this.itemsAmount>this.visibleItems.length?(e.fullControls.relatedPanel.relatedLeftButton.show(),e.fullControls.relatedPanel.relatedRightButton.show(),0==this.currentItem&&e.fullControls.relatedPanel.relatedLeftButton.hide(),this.currentItem==this.maximumItem&&e.fullControls.relatedPanel.relatedRightButton.hide()):(e.fullControls.relatedPanel.relatedLeftButton.hide(),e.fullControls.relatedPanel.relatedRightButton.hide())}}),e.fullControls.relatedPanel.removeActiveClass=function(){$.each(e.fullControls.relatedPanel.find(".sp-related-item"),function(t,e){$(e).removeClass("sp-related-active-item")})},e.fullControls.relatedPanel.addActiveClass=function(t){$.each(e.fullControls.relatedPanel.find(".sp-related-item"),function(e,o){e==t&&$(o).addClass("sp-related-active-item")})},e.fullControls.relatedPanel.buildAdCuesAfterrelatedUpdate=function(){try{e._buildadvertisement._buildadcue.constructed=!1}catch(t){}e.mediaElement.videoElement.addEventListener("timeupdate",function(){"true"!=e.options.advertisement.cues||isNaN(e.mediaElement.videoElement.duration)||"vod"!=e.options.content||e._buildadvertisement._buildadcue.constructed||e._buildadvertisement._buildadcue()})},e.fullControls.relatedPanel.updateNewrelatedStats=function(t){console.log("play the related video now-----"),console.log("Clicked on item "+t),console.log("playingIndex "+e.fullControls.relatedPanel.playingIndex),e.fullControls.relatedPanel.playingIndex=t,console.log("playingIndex "+e.fullControls.relatedPanel.playingIndex);try{e.options.file[0].subtitles[0].file=e.options.relatedvideos[t].subtitles[0].file}catch(t){}e._createAndAppendHLStoPlayer(e.options.relatedvideos[t]),e.fullControls.relatedPanel.removeActiveClass(),e.fullControls.relatedPanel.addActiveClass(t),e.fullControls.relatedPanel.playingIndex=t,e.fullControls.relatedPanel.buildAdCuesAfterrelatedUpdate()},e.fullControls.relatedPanel.find(".sp-related-item").click(function(t){t=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(t);var l=$(this).attr("indexoftile");SaranyuHlsHTML5Player.Utils.DLOG("Clicked on item "+l),e.fullControls.relatedPanel.updateNewrelatedStats(l);try{e.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.seekbarPreviewContainerImgTag&&e.fullControls.bottomControlBar.bottomProgressBar.progressbar.seekbarPreviewContainer.ajaxForVtt(e.options.relatedvideos[l].thumbnails)}catch(t){}e.fullControls.relatedPanel.hide(),o.play();try{e.eventcallbacks.onRelatedVideoClick(e.options.relatedvideos[l].mediaid,e.options.relatedvideos[l].catalogid)}catch(t){}}),e.fullControls.relatedPanel.relatedLeftButton.click(function(t){t=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(t),SaranyuHlsHTML5Player.Utils.DLOG("Clicked on prev related button"),e.fullControls.relatedPanel.relatedItemView.saranyuOwlCarousel.trigger("owl.prev")}),e.fullControls.relatedPanel.relatedRightButton.click(function(t){t=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(t),SaranyuHlsHTML5Player.Utils.DLOG("Clicked on next related button"),e.fullControls.relatedPanel.relatedItemView.saranyuOwlCarousel.trigger("owl.next")}),t||(e.mediaElement.videoElement.addEventListener("timeupdate",function(t){try{clearTimeout(e.fullControls.relatedPanel.relatedVideosTimer),clearInterval(e.fullControls.relatedPanel.relatedVideosDisplayTimer),$(e.fullControls.relatedPanel.find(".sp-related-panel-autotext1")).html("Will automatically load in <span class='timer'>10</span> seconds"),e.fullControls.relatedPanel.hide()}catch(t){}}),e.mediaElement.videoElement.addEventListener("ended",function(){if(e.fullControls.relatedPanel.boolz?e.fullControls.relatedPanel.relatedVideosDisplayTimerCount=10:e.fullControls.relatedPanel.relatedVideosDisplayTimerCount=0,("true"==e.options.relatedvideoautoplay||1==e.options.relatedvideoautoplay)&&e.options.relatedvideos.length>0){if(""===e.fullControls.relatedPanel.playingIndex){e.fullControls.relatedPanel.playingIndex=0;var t=0}else{(t=Number(e.fullControls.relatedPanel.playingIndex)+1)>e.options.relatedvideos.length-1&&(t=0)}if(t<=e.options.relatedvideos.length){if(console.log("related video show now---"+t),e.fullControls.relatedPanel.item=e.fullControls.relatedPanel.find(".sp-related-item"),e.fullControls.relatedPanel.item.attr("indexoftile",t),e.fullControls.relatedPanel.item.span=e.fullControls.relatedPanel.item.find("span"),e.fullControls.relatedPanel.item.span.html(e.options.relatedvideos[t].videotitle),e.fullControls.relatedPanel.item.img=e.fullControls.relatedPanel.item.find("img"),$(e.fullControls.relatedPanel.item.img).attr("src",e.options.relatedvideos[t].poster),console.log("now next item should play"),$(e.fullControls.relatedPanel.find(".sp-related-panel-autotext").html(e.options.relatedvideos[t].videotitle)),0==e.fullControls.relatedPanel.relatedVideosDisplayTimerCount){e.fullControls.relatedPanel.hide(),e.fullControls.relatedPanel.updateNewrelatedStats(t);try{e.eventcallbacks.onRelatedVideoClick(e.options.relatedvideos[t].mediaid,e.options.relatedvideos[t].catalogid)}catch(t){}return}try{window.clearInterval(e.fullControls.relatedPanel.relatedVideosDisplayTimer)}catch(t){}e.fullControls.relatedPanel.relatedVideosDisplayTimer=setInterval(function(){var o=e.fullControls.relatedPanel.relatedVideosDisplayTimerCount;$(e.fullControls.relatedPanel.find(".sp-related-panel-autotext").html(e.options.relatedvideos[t].videotitle)),$(e.fullControls.relatedPanel.find(".sp-related-panel-autotext1")).html("Will automatically load in <span class='timer'>"+o+"</span> seconds"),e.fullControls.relatedPanel.relatedVideosDisplayTimerCount-=1}.bind(e),1e3);try{window.clearInterval(e.fullControls.relatedPanel.relatedVideosTimer)}catch(t){}e.fullControls.relatedPanel.relatedVideosTimer=setTimeout(function(){e.fullControls.relatedPanel.hide(),e.fullControls.relatedPanel.updateNewrelatedStats(t);try{e.eventcallbacks.onRelatedVideoClick(e.options.relatedvideos[t].mediaid,e.options.relatedvideos[t].catalogid)}catch(t){}}.bind(e,t),1e4)}}})),e._buildrelatedvideo.flushRelatedVideos=function(){e.options.relatedvideos=[],e.fullControls.relatedPanel.playingIndex=""},e._buildrelatedvideo.appendRelatedVideos=function(t,o){void 0!==o&&(e.options.relatedvideoautoplay=o),$.each(t,function(t,o){e.options.relatedvideos.push(o)}),e.fullControls.relatedPanel.remove(),e._buildrelatedvideo(!0)}.bind(e)},_buildvideotitle:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching video title");var t=this;t.fullControls.topContolbar.append('<div class="sp-controls-top-video-title"><span class="sp-controls-top-video-title-text"></span></div>'),t.fullControls.topContolbar.videoTitle=t.fullControls.topContolbar.find(".sp-controls-top-video-title .sp-controls-top-video-title-text"),t.fullControls.topContolbar.videoTitle.changeTitle=function(e){t.fullControls.topContolbar.videoTitle.html(e)}.bind(t)},_buildbigicons:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching big icons");var t=this,e=(t.options,t.mediaElement.videoElement);t.playerLayers.append('<div class="sp-player-poster"><img></div>'),t.playerLayers.append('<div class="sp-player-bigplay"></div>'),t.playerLayers.append('<div class="sp-player-loading"></div>'),t.playerLayers.append('<div class="sp-player-replay"></div>'),t.playerLayers.poster=t.playerLayers.find(".sp-player-poster"),t.playerLayers.poster.img=t.playerLayers.poster.find("img"),t.playerLayers.poster.changePoster=function(e){$(t.playerLayers.poster.img).attr("src",e)}.bind(t),t.playerLayers.poster.changePoster(t.options.file[0].poster),t.playerLayers.bigplay=t.playerLayers.find(".sp-player-bigplay"),t.playerLayers.loading=t.playerLayers.find(".sp-player-loading"),t.playerLayers.bigreplay=t.playerLayers.find(".sp-player-replay"),"true"===t.options.autoplay||1==t.options.autoplay?(t.playerLayers.bigplay.hide(),t.playerLayers.bigreplay.hide()):(t.playerLayers.bigreplay.hide(),t.playerLayers.loading.hide(),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.addClass("sp-pause"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-play"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.removeClass("sp-replay"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuPlaypause.tooltip.html(SaranyuHlsHTML5Player.defaultOptions.titleStrings.play)),t.playerLayers.on("click",function(o){SaranyuHlsHTML5Player.bigPlayClickCounter++,1===SaranyuHlsHTML5Player.bigPlayClickCounter?SaranyuHlsHTML5Player.bigPlayClickCounterTimer=setTimeout(function(){e.paused?t._videoPlayerControls("play"):t._videoPlayerControls("pause"),SaranyuHlsHTML5Player.bigPlayClickCounter=0}.bind(t),SaranyuHlsHTML5Player.bigPlayClickDELAY):(clearTimeout(SaranyuHlsHTML5Player.bigPlayClickCounterTimer),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.toggleFullscreen(),SaranyuHlsHTML5Player.bigPlayClickCounter=0)}).on("dblclick",function(t){t.preventDefault()}),e.addEventListener("play",function(){t.playerLayers.poster.hide(),t.playerLayers.bigplay.hide(),t.playerLayers.loading.hide(),t.playerLayers.bigreplay.hide()}),e.addEventListener("playing",function(){t.playerLayers.poster.hide(),t.playerLayers.bigplay.hide(),t.playerLayers.loading.hide(),t.playerLayers.bigreplay.hide()}),e.addEventListener("pause",function(){t.playerLayers.bigplay.show(),t.playerLayers.loading.hide(),t.playerLayers.bigreplay.hide()}),e.addEventListener("waiting",function(){e.paused||t.playerLayers.loading.show()}),e.addEventListener("ended",function(){t.playerLayers.bigreplay.show(),t.playerLayers.bigplay.hide()})},_buildeventcallbacks:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching Event Callbacks");var t=this,e=t.mediaElement.videoElement;t.eventcallbacks={},e.addEventListener("ended",function(){try{if(t._buildadvertisement.initializeAd.isLinear)return}catch(t){}try{t.eventcallbacks.onComplete(e.currentTime,e.duration,e.mediaId)}catch(t){SaranyuHlsHTML5Player.Utils.DLOG("callback events complete is not listened")}}),e.addEventListener("pause",function(){try{if(t._buildadvertisement.initializeAd.isLinear)return}catch(t){}try{t.eventcallbacks.onPause(e.currentTime,e.duration,e.mediaId)}catch(t){SaranyuHlsHTML5Player.Utils.DLOG("callback events Pause is not listened")}}),e.addEventListener("play",function(){try{if(t._buildadvertisement.initializeAd.isLinear)return}catch(t){}try{0==e.currentTime?t.eventcallbacks.onPlay(e.currentTime,e.duration,e.mediaId):t.eventcallbacks.onResume(e.currentTime,e.duration,e.mediaId)}catch(t){SaranyuHlsHTML5Player.Utils.DLOG("callback events Play/Resume is not listened")}}),e.addEventListener("seeked",function(){try{if(t._buildadvertisement.initializeAd.isLinear)return}catch(t){}try{t.eventcallbacks.onSeeked(e.currentTime,e.duration,e.mediaId)}catch(t){SaranyuHlsHTML5Player.Utils.DLOG("callback events Seeked is not listened")}})},_buildhotkeys:function(){SaranyuHlsHTML5Player.Utils.DLOG("Attaching Hotkeys");var t=this,e=t.mediaElement.videoElement;t.playerLayers.append('<div class="sp-player-text-feedback-container"></div>'),t.playerLayers.feedbackTextElement=t.playerLayers.find(".sp-player-text-feedback-container"),t.playerLayers.feedbackTextElement.hide(),t.playerInner.attr("tabindex","0"),t.playerInner.keydown(function(o){if(o.preventDefault(),!t._buildadvertisement.initializeAd.isLinear){var l="number"==typeof o.which?o.which:o.keyCode;if(13==l||32==l)SaranyuHlsHTML5Player.Utils.DLOG("Hotkey space/enter pressed which actions play/pause"),e.paused?t._videoPlayerControls("play"):t._videoPlayerControls("pause");else if(109==l||77==l)SaranyuHlsHTML5Player.Utils.DLOG("Hotkey M/m pressed which actions mute or unmute"),1==e.muted?t._videoPlayerControls("unmute"):t._videoPlayerControls("mute");else if(70==l||102==l)SaranyuHlsHTML5Player.Utils.DLOG("Hotkey F/f pressed which actions fullscreen toggle"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.toggleFullscreen();else if(117==l||85==l){SaranyuHlsHTML5Player.Utils.DLOG("Hotkey up-arrow pressed which actions  volume increase");var a=e.volume;a+=.1,a=Math.max(0,a),a=Math.min(a,1),t._videoPlayerControls("volumechange",a),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.positionVolumeHandle(a)}else if(100==l||68==l){SaranyuHlsHTML5Player.Utils.DLOG("Hotkey down-arrow pressed which actions volume decrease");a=e.volume;a-=.1,a=Math.max(0,a),a=Math.min(a,1),t._videoPlayerControls("volumechange",a),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.positionVolumeHandle(a)}}})},_buildadvertisement:function(){SaranyuHlsHTML5Player.Utils.DLOG("building advertisement");var t=this,e=t.options,o=["playpause","fullScreen","volume","title","time"];if(e.advertisement){t.adContainer.append('<video class="sp-ad-dummy-video"></video>'),t.adContainer.append('<div class="sp-ad-top-controlbar"></div>'),t.adContainer.append('<div class="sp-ad-video-element"></div>'),t.adContainer.append('<div class="sp-ad-bottom-controlbar"></div>'),t.adContainer.adTopControls=t.adContainer.find(".sp-ad-top-controlbar"),t.adContainer.adVideoElement=t.adContainer.find(".sp-ad-video-element"),t.adContainer.adBottomControls=t.adContainer.find(".sp-ad-bottom-controlbar"),t.adContainer.adDummyVideoTag=t.adContainer.find(".sp-ad-dummy-video"),t._buildadvertisement._buildadcue=function(){if(SaranyuHlsHTML5Player.Utils.DLOG("Building ad title icon for ad container"),t._buildadvertisement._buildadcue.constructed=!1,!t._buildadvertisement._buildadcue.constructed){try{t.fullControls.bottomControlBar.bottomProgressBar.progressbar.cues.empty()}catch(t){}$.each(t._buildadvertisement.adsets,function(e,o){if(Number(o.schedule)){var l=SaranyuHlsHTML5Player.Utils.getPercentageForGivenDuration(o.schedule,t.mediaElement.videoElement.duration);if(!(l>=0&&l<=100))return!0;var a="<span class='sp-ad-cue-points sp-ad-cue-points-"+e+"' style='left:"+l+"%'></span>";t.fullControls.bottomControlBar.bottomProgressBar.progressbar.cues.append(a);t.fullControls.bottomControlBar.bottomProgressBar.progressbar.cues.find(".sp-ad-cue-points-"+e);t._buildadvertisement._buildadcue.constructed=!0}})}},t._buildadvertisement._buildadtitle=function(){SaranyuHlsHTML5Player.Utils.DLOG("Building ad title icon for ad container");t.adContainer.adTopControls.append('<div class="ad-video-title"><span class="ad-video-title-text"></span></div>'),t.adContainer.adTopControls.adTitle=t.adContainer.adTopControls.find(".ad-video-title-text")},t._buildadvertisement._buildadplaypause=function(){SaranyuHlsHTML5Player.Utils.DLOG("Building playpause icon for ad container");t.adContainer.adBottomControls.append('<div class="sp-ad-button sp-ad-playpause sp-ad-play"><button></button></div>'),t.adContainer.adBottomControls.playpause=t.adContainer.adBottomControls.find(".sp-ad-playpause"),t.adContainer.adBottomControls.playpause.click(function(){SaranyuHlsHTML5Player.Utils.DLOG("AD play pause button clicked");try{t._buildadvertisement.initializeAd.adPaused?(t._buildadvertisement.initializeAd.adsManager.resume(),t._buildadvertisement.initializeAd.adPaused=!1):(t._buildadvertisement.initializeAd.adsManager.pause(),t._buildadvertisement.initializeAd.adPaused=!0)}catch(t){}}.bind(t)),t.adContainer.adBottomControls.playpause.changeIcon=function(){t._buildadvertisement.initializeAd.adPaused?t.adContainer.adBottomControls.playpause.removeClass("sp-ad-play").addClass("sp-ad-pause"):t.adContainer.adBottomControls.playpause.removeClass("sp-ad-pause").addClass("sp-ad-play")}},t._buildadvertisement._buildadvolume=function(){SaranyuHlsHTML5Player.Utils.DLOG("Building volume icon for ad container");t.adContainer.adBottomControls.append('<div class="sp-ad-button sp-ad-volume-muteunmute sp-ad-unmute"><button></button></div>'),t.adContainer.adBottomControls.volumeMuteUnmute=t.adContainer.adBottomControls.find(".sp-ad-volume-muteunmute");t.adContainer.adBottomControls.append('<div class="sp-ad-volume-slider sp-ad-volume-slider-wrap"><div class="sp-ad-volume-current"></div><div class="sp-ad-volume-handle"></div></div>'),t.adContainer.adBottomControls.volumeSlider=t.adContainer.adBottomControls.find(".sp-ad-volume-slider.sp-ad-volume-slider-wrap"),t.adContainer.adBottomControls.volumeSlider.volumeCurrent=t.adContainer.adBottomControls.volumeSlider.find(".sp-ad-volume-current"),t.adContainer.adBottomControls.volumeSlider.volumeHandle=t.adContainer.adBottomControls.volumeSlider.find(".sp-ad-volume-handle"),t.adContainer.adBottomControls.volumeSlider.oldVolume=1,t.adContainer.adBottomControls.volumeSlider.positionVolumeHandle=function(e){t.adContainer.adBottomControls.volumeSlider.volumeCurrent.css("width",100*e+"%"),t.adContainer.adBottomControls.volumeSlider.volumeHandle.css("left","calc("+100*e+"% - "+t.adContainer.adBottomControls.volumeSlider.volumeHandle.width()/2+"px)")},t.adContainer.adBottomControls.volumeSlider.handleVolumeMove=function(e){var o=null,l=t.adContainer.adBottomControls.volumeSlider,a=l.offset(),n=l.width();o=(e.pageX-a.left)/n,o=Math.max(0,o),o=Math.min(o,1),t.adContainer.adBottomControls.volumeSlider.positionVolumeHandle(o);try{t._buildadvertisement.initializeAd.adsManager.setVolume(o),t.adContainer.adBottomControls.volumeSlider.oldVolume=o}catch(e){}},t.adContainer.adBottomControls.volumeSlider.bind("mouseover",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.adContainer.adBottomControls.volumeSlider.mouseIsOver=!0}).bind("mousemove",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),1==t.adContainer.adBottomControls.volumeSlider.mouseIsDown&&t.adContainer.adBottomControls.volumeSlider.handleVolumeMove(e)}).bind("mouseup",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.adContainer.adBottomControls.volumeSlider.mouseIsDown=!1}).bind("mousedown",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.adContainer.adBottomControls.volumeSlider.handleVolumeMove(e),t.adContainer.adBottomControls.volumeSlider.mouseIsDown=!0}).bind("mouseleave",function(e){e=SaranyuHlsHTML5Player.Utils.preventSelectionOfTextInMouseMove(e),t.adContainer.adBottomControls.volumeSlider.mouseIsDown=!1}),t.adContainer.adBottomControls.volumeMuteUnmute.click(function(){t._buildadvertisement.initializeAd.adMuted?(t.adContainer.adBottomControls.volumeSlider.oldVolume>=0&&t._buildadvertisement.initializeAd.adsManager.setVolume(t.adContainer.adBottomControls.volumeSlider.oldVolume),t._buildadvertisement.initializeAd.adsManager.setVolume(.2),t._buildadvertisement.initializeAd.adMuted=!1):(t._buildadvertisement.initializeAd.adsManager.setVolume(0),t._buildadvertisement.initializeAd.adMuted=!0)}),t.adContainer.adBottomControls.volumeMuteUnmute.changeIcon=function(){t._buildadvertisement.initializeAd.adMuted?(t.adContainer.adBottomControls.volumeMuteUnmute.addClass("sp-ad-mute").removeClass("sp-ad-unmute"),t.adContainer.adBottomControls.volumeSlider.hide()):(t.adContainer.adBottomControls.volumeMuteUnmute.addClass("sp-ad-unmute").removeClass("sp-ad-mute"),t.adContainer.adBottomControls.volumeSlider.show())},t.adContainer.adBottomControls.volumeMuteUnmute.checkDefaultContentVolume=function(){t.mediaElement.videoElement.muted?(t.adContainer.adBottomControls.volumeMuteUnmute.removeClass("sp-ad-unmute").addClass("sp-ad-mute"),t._buildadvertisement.initializeAd.adsManager.setVolume(0),t.adContainer.adBottomControls.volumeSlider.oldVolume=t.mediaElement.videoElement.volume,t.adContainer.adBottomControls.volumeSlider.positionVolumeHandle(t.adContainer.adBottomControls.volumeSlider.oldVolume),t._buildadvertisement.initializeAd.adMuted=!0):(t.adContainer.adBottomControls.volumeMuteUnmute.removeClass("sp-ad-mute").addClass("sp-ad-unmute"),t._buildadvertisement.initializeAd.adsManager.setVolume(t.mediaElement.videoElement.volume),t.adContainer.adBottomControls.volumeSlider.oldVolume=t.mediaElement.videoElement.volume,t.adContainer.adBottomControls.volumeSlider.positionVolumeHandle(t.adContainer.adBottomControls.volumeSlider.oldVolume),t._buildadvertisement.initializeAd.adMuted=!1)}},t._buildadvertisement._buildadtime=function(){SaranyuHlsHTML5Player.Utils.DLOG("Building time for ad container");t.adContainer.adBottomControls.append('<div class="sp-ad-player-time"><span class="sp-ad-plyr-currenttime">00:00</span>&nbsp;/&nbsp;<span class="sp-ad-plyr-duration">00:00</span></div>'),t.adContainer.adBottomControls.timeContainer=t.adContainer.adBottomControls.find(".sp-ad-player-time"),t.adContainer.adBottomControls.timeContainer.currentTime=t.adContainer.adBottomControls.find(".sp-ad-plyr-currenttime"),t.adContainer.adBottomControls.timeContainer.duration=t.adContainer.adBottomControls.find(".sp-ad-plyr-duration"),t._buildadvertisement._buildadtime.changeCurrentTime=function(){try{var e=0;e=t._buildadvertisement.initializeAd.ad.getDuration()-t._buildadvertisement.initializeAd.remainingTime>=0?t._buildadvertisement.initializeAd.ad.getDuration()-t._buildadvertisement.initializeAd.remainingTime:0,t.adContainer.adBottomControls.timeContainer.currentTime.html(SaranyuHlsHTML5Player.Utils.secondsToTimeCode(e))}catch(t){}},t._buildadvertisement._buildadtime.changeDuration=function(){try{t.adContainer.adBottomControls.timeContainer.duration.html(SaranyuHlsHTML5Player.Utils.secondsToTimeCode(t._buildadvertisement.initializeAd.ad.getDuration()))}catch(t){}}},t._buildadvertisement._buildadfullScreen=function(){SaranyuHlsHTML5Player.Utils.DLOG("Building playpause icon for ad container");t.adContainer.adBottomControls.append('<div class="sp-ad-button sp-ad-fullscreen-unfullscreen sp-ad-fullscreen"><button></button></div>'),t.adContainer.adBottomControls.fullscreenunfullscreen=t.adContainer.adBottomControls.find(".sp-ad-fullscreen-unfullscreen"),t.isFullScreen?t.adContainer.adBottomControls.fullscreenunfullscreen.removeClass("sp-ad-fullscreen").addClass("sp-ad-unfullscreen"):t.adContainer.adBottomControls.fullscreenunfullscreen.removeClass("sp-ad-unfullscreen").addClass("sp-ad-fullscreen"),t.adContainer.adBottomControls.fullscreenunfullscreen.click(function(e){e.preventDefault(),SaranyuHlsHTML5Player.Utils.DLOG("Clicked on FullScreen"),t.fullControls.bottomControlBar.bottomPlayerControls.saranyuFullScreen.toggleFullscreen(),setTimeout(function(){t.isFullScreen?t.adContainer.adBottomControls.fullscreenunfullscreen.removeClass("sp-ad-fullscreen").addClass("sp-ad-unfullscreen"):t.adContainer.adBottomControls.fullscreenunfullscreen.removeClass("sp-ad-unfullscreen").addClass("sp-ad-fullscreen")}.bind(t),600)}.bind(t))},t._buildadvertisement._createAdControls=function(){SaranyuHlsHTML5Player.Utils.DLOG("_createAdControls");var t=o;this._buildadvertisement._destroyAdControls();for(featureIndex in t)if(feature=t[featureIndex],SaranyuHlsHTML5Player.Utils.DLOG("ad feature found is "+feature),this._buildadvertisement["_buildad"+feature])try{this._buildadvertisement["_buildad"+feature]()}catch(t){SaranyuHlsHTML5Player.Utils.DLOG(t)}else SaranyuHlsHTML5Player.Utils.DLOG("Error could not find function")}.bind(t),t._buildadvertisement._destroyAdControls=function(){SaranyuHlsHTML5Player.Utils.DLOG("_destroyAdControls");this.adContainer.adTopControls.empty(),this.adContainer.adBottomControls.empty(),this.adContainer.adVideoElement.empty();try{this.fullControls.bottomControlBar.bottomProgressBar.progressbar.cues.empty()}catch(t){}}.bind(t),t._buildadvertisement._createAdControls(),t._buildadvertisement.initializeAd=function(e){try{try{t.adContainer.adBottomControls.volumeMuteUnmute.checkDefaultContentVolume()}catch(t){}t._buildadvertisement.initializeAd.onAdError()}catch(t){}t._buildadvertisement.initializeAd.adsManager,t._buildadvertisement.initializeAd.adsLoader,t._buildadvertisement.initializeAd.adDisplayContainer,t._buildadvertisement.initializeAd.intervalTimer,t._buildadvertisement.initializeAd.videoContent,t._buildadvertisement.initializeAd.adStarted=!1,t._buildadvertisement.initializeAd.isLinear=!1,t._buildadvertisement.initializeAd.adObj,t._buildadvertisement.initializeAd.adPaused=!1,t._buildadvertisement.initializeAd.adMuted=!1,t._buildadvertisement.initializeAd.init=function(e){t._buildadvertisement.initializeAd.videoContent=t.adContainer.adDummyVideoTag[0],t._buildadvertisement.initializeAd.setUpIMA(e)},t._buildadvertisement.initializeAd.setUpIMA=function(e){t._buildadvertisement.initializeAd.createAdDisplayContainer(),t._buildadvertisement.initializeAd.adsLoader=new google.ima.AdsLoader(t._buildadvertisement.initializeAd.adDisplayContainer),t._buildadvertisement.initializeAd.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,t._buildadvertisement.initializeAd.onAdsManagerLoaded,!1),t._buildadvertisement.initializeAd.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t._buildadvertisement.initializeAd.onAdError,!1),t._buildadvertisement.initializeAd.adsRequest=new google.ima.AdsRequest,t._buildadvertisement.initializeAd.adsRequest.adTagUrl=e.adurl,t._buildadvertisement.initializeAd.adsRequest.linearAdSlotWidth=t.adContainer.width(),t._buildadvertisement.initializeAd.adsRequest.linearAdSlotHeight=t.adContainer.height(),t._buildadvertisement.initializeAd.adsRequest.nonLinearAdSlotWidth=t.adContainer.width(),t._buildadvertisement.initializeAd.adsRequest.nonLinearAdSlotHeight=SaranyuHlsHTML5Player.maxNonLinearAdHeight,t._buildadvertisement.initializeAd.adsLoader.requestAds(t._buildadvertisement.initializeAd.adsRequest)}.bind(t),t._buildadvertisement.initializeAd.createAdDisplayContainer=function(){try{t.adContainer.adVideoElement.empty()}catch(t){}google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),t._buildadvertisement.initializeAd.adDisplayContainer=new google.ima.AdDisplayContainer(t.adContainer.adVideoElement[0],t._buildadvertisement.initializeAd.videoContent[0])},t._buildadvertisement.initializeAd.playAds=function(){try{t.adContainer.addClass("sp-ad-container-display")}catch(t){}t._buildadvertisement.initializeAd.videoContent.load(),t._buildadvertisement.initializeAd.adDisplayContainer.initialize();try{t._buildadvertisement.initializeAd.adsManager.init(t.adContainer.adVideoElement.width(),t.adContainer.adVideoElement.height(),google.ima.ViewMode.NORMAL),t._buildadvertisement.initializeAd.adsManager.start()}catch(e){t._buildadvertisement.initializeAd.videoContent.play()}},t._buildadvertisement.initializeAd.onAdsManagerLoaded=function(e){t._buildadvertisement.initializeAd.adsRenderingSettings=new google.ima.AdsRenderingSettings,t._buildadvertisement.initializeAd.adsManager=e.getAdsManager(t._buildadvertisement.initializeAd.videoContent,t._buildadvertisement.initializeAd.adsRenderingSettings),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,t._buildadvertisement.initializeAd.onAdError),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,t._buildadvertisement.initializeAd.onContentPauseRequested),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,t._buildadvertisement.initializeAd.onContentResumeRequested),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.VOLUME_MUTED,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,t._buildadvertisement.initializeAd.onAdEvent),t._buildadvertisement.initializeAd.playAds()},t._buildadvertisement.initializeAd.onAdError=function(e){try{SaranyuHlsHTML5Player.Utils.DLOG(e.getError())}catch(t){}try{t._buildadvertisement.initializeAd.isLinear&&(SaranyuHlsHTML5Player.Utils.DLOG("Retaining volume status change made in ad player to content player"),t._videoPlayerControls("volumechange",t.adContainer.adBottomControls.volumeSlider.oldVolume),t.fullControls.bottomControlBar.bottomPlayerControls.volumeSlider.positionVolumeHandle(t.adContainer.adBottomControls.volumeSlider.oldVolume),t._buildadvertisement.initializeAd.adMuted?t._videoPlayerControls("mute"):t._videoPlayerControls("unmute"))}catch(t){}try{t._buildadvertisement.initializeAd.adsManager.destroy()}catch(t){}try{clearInterval(t._buildadvertisement.initializeAd.intervalTimer)}catch(t){}try{SaranyuHlsHTML5Player.Utils.DLOG("resetting ad container height"),t.adContainer.height("100%")}catch(t){}try{t.adContainer.removeClass("sp-ad-container-display")}catch(t){}"postroll"!=t._buildadvertisement.initializeAd.adObj.schedule?t.mediaElement.videoElement.play():Number(t.fullControls.playlistPanel.playingIndex)+1<t.options.file.length&&t.mediaElement.videoElement.play();t.adContainer.removeClass("sp-ad-active"),t.adContainer.removeClass("sp-ad-banner"),t._buildadvertisement.initializeAd.adStarted=!1,t._buildadvertisement.initializeAd.isLinear=!1},t._buildadvertisement.initializeAd.onAdEvent=function(e){switch(t._buildadvertisement.initializeAd.ad=e.getAd(),e.type){case google.ima.AdEvent.Type.LOADED:if(t._buildadvertisement.initializeAd.ad.isLinear())t._buildadvertisement.initializeAd.adStarted=!0,t._buildadvertisement.initializeAd.isLinear=!0,t.adContainer.addClass("sp-ad-active"),t.adContainer.adTopControls.adTitle.html(t._buildadvertisement.initializeAd.ad.getTitle()),t.adContainer.adBottomControls.volumeMuteUnmute.checkDefaultContentVolume(),t._buildadvertisement.initializeAd.intervalTimer=setInterval(function(){t._buildadvertisement.initializeAd.remainingTime=t._buildadvertisement.initializeAd.adsManager.getRemainingTime(),t._buildadvertisement.initializeAd.remainingTime=t._buildadvertisement.initializeAd.remainingTime>=0?t._buildadvertisement.initializeAd.remainingTime:0,t._buildadvertisement.initializeAd.adsManager.resize(t.adContainer.adVideoElement.width(),t.adContainer.adVideoElement.height(),google.ima.ViewMode.NORMAL),t._buildadvertisement._buildadtime.changeCurrentTime(),t._buildadvertisement._buildadtime.changeDuration(),t.mediaElement.videoElement.pause()}.bind(t),300);else{t._buildadvertisement.initializeAd.adStarted=!0,t._buildadvertisement.initializeAd.isLinear=!1,t.adContainer.addClass("sp-ad-banner"),t.adContainer.adBottomControls.volumeMuteUnmute.checkDefaultContentVolume(),t.adContainer.height(t._buildadvertisement.initializeAd.ad.getHeight()+10),t._buildadvertisement.initializeAd.intervalTimer=setInterval(function(){t._buildadvertisement.initializeAd.adsManager.resize(t.adContainer.adVideoElement.width(),t.adContainer.adVideoElement.height(),google.ima.ViewMode.NORMAL)}.bind(t),300);t.adContainer.adVideoElement.append('<div class="sp-ad-banner-closebtn">Close</div>'),t.adContainer.adVideoElement.bannerAdCloseBtn=t.adContainer.adVideoElement.find(".sp-ad-banner-closebtn"),t.adContainer.adVideoElement.bannerAdCloseBtn.click(function(){t.adContainer.removeClass("sp-ad-banner"),$(this).remove()})}break;case google.ima.AdEvent.Type.STARTED:t._buildadvertisement.initializeAd.ad.isLinear();break;case google.ima.AdEvent.Type.CLICK:t._buildadvertisement.initializeAd.adsManager.pause();break;case google.ima.AdEvent.Type.PAUSED:t._buildadvertisement.initializeAd.adPaused=!0,t.adContainer.adBottomControls.playpause.changeIcon();break;case google.ima.AdEvent.Type.RESUMED:t._buildadvertisement.initializeAd.adPaused=!1,t.adContainer.adBottomControls.playpause.changeIcon();break;case google.ima.AdEvent.Type.VOLUME_CHANGED:0==t._buildadvertisement.initializeAd.adsManager.getVolume()?t._buildadvertisement.initializeAd.adMuted=!0:(t._buildadvertisement.initializeAd.adMuted=!1,t.adContainer.adBottomControls.volumeSlider.positionVolumeHandle(t._buildadvertisement.initializeAd.adsManager.getVolume())),t.adContainer.adBottomControls.volumeMuteUnmute.changeIcon();break;case google.ima.AdEvent.Type.VOLUME_MUTED:t._buildadvertisement.initializeAd.adMuted=!0,t.adContainer.adBottomControls.volumeMuteUnmute.changeIcon();break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.SKIPPED:t._buildadvertisement.initializeAd.onAdError()}},t._buildadvertisement.initializeAd.onContentPauseRequested=function(){t._buildadvertisement.initializeAd.videoContent.pause()},t._buildadvertisement.initializeAd.onContentResumeRequested=function(){t._buildadvertisement.initializeAd.videoContent.play()},t._buildadvertisement.initializeAd.init(e)}.bind(t),t._buildadvertisement.adsets=e.advertisement.adsets,t._buildadvertisement.adinvoker=function(){t._buildadvertisement.adinvoker.peroll,t._buildadvertisement.adinvoker.midroll=[],t._buildadvertisement.adinvoker.postroll,$.each(t._buildadvertisement.adsets,function(e,o){"preroll"==o.schedule&&(SaranyuHlsHTML5Player.Utils.DLOG("Preroll ad has been invoked"),t._buildadvertisement.initializeAd.adObj=o,t._buildadvertisement.initializeAd(t._buildadvertisement.initializeAd.adObj),t._buildadvertisement.adinvoker.peroll=!0),isNaN(o.schedule)||(o.flag=!0,t._buildadvertisement.adinvoker.midroll.push(o)),"postroll"==o.schedule&&t.mediaElement.videoElement.addEventListener("ended",function(){t._buildadvertisement.adinvoker.postroll?SaranyuHlsHTML5Player.Utils.DLOG("Postroll ad has been played"):(SaranyuHlsHTML5Player.Utils.DLOG("Postroll ad has been invoked"),t._buildadvertisement.initializeAd.adObj=o,t._buildadvertisement.initializeAd(t._buildadvertisement.initializeAd.adObj),t._buildadvertisement.adinvoker.postroll=!0)}.bind(t))}),t._buildadvertisement.adinvoker.midroll&&t.mediaElement.videoElement.addEventListener("timeupdate",function(){"true"!=t.options.advertisement.cues||isNaN(t.mediaElement.videoElement.duration)||"vod"!=t.options.content||t._buildadvertisement._buildadcue.constructed||t._buildadvertisement._buildadcue(),$.each(t._buildadvertisement.adinvoker.midroll,function(e,o){var l=t.mediaElement.videoElement;l.currentTime>=Number(o.schedule)&&o.flag&&!l.paused&&(SaranyuHlsHTML5Player.Utils.DLOG("midroll ad has been invoked with schedule "+Number(o.schedule)),t._buildadvertisement.initializeAd.adObj=o,t._buildadvertisement.initializeAd(t._buildadvertisement.initializeAd.adObj),t._buildadvertisement.initializeAd.adObj.flag=!1)})}.bind(t))},function(){if(SaranyuHlsHTML5Player.googleImaSDKLoaded)SaranyuHlsHTML5Player.Utils.DLOG("Google IMA SDK was Loaded already"),t._buildadvertisement.adinvoker();else{var e=document.createElement("script");e.type="text/javascript",e.src=SaranyuHlsHTML5Player.googleImaSDKURL,document.getElementsByTagName("head")[0].appendChild(e),SaranyuHlsHTML5Player.googleImaSDKLoaded=!0,SaranyuHlsHTML5Player.Utils.DLOG("Google IMA SDK Loaded"),e.onload=function(){t._buildadvertisement.adinvoker()}.bind(t)}}.bind(t)()}},_videoPlayerControls:function(t,e){SaranyuHlsHTML5Player.Utils.DLOG("inside video controls function received command , "+t+" with value of "+e);var o=this,l=o.mediaElement.videoElement;o.options;switch(t){case"play":try{o.mediaElement.videoElement.saranyuHlsMertics.islive&&"livedvr"!=o.options.content.toLowerCase()&&(l.currentTime=l.duration-3*o.mediaElement.videoElement.saranyuHlsMertics.targetduration)}catch(t){}"hls"===o.playerType&&0===o.mediaElement.videoElement.duration?o._createAndAppendHLStoPlayer._attachHLStoVideo():l.play(),SaranyuHlsHTML5Player.Utils.DLOG(t+" to video player");break;case"pause":l.pause(),SaranyuHlsHTML5Player.Utils.DLOG(t+" to video player");break;case"stop":l.currentTime=0,l.pause(),SaranyuHlsHTML5Player.Utils.DLOG(t+" to video player");break;case"mute":l.muted=!0,SaranyuHlsHTML5Player.Utils.DLOG(t+" to video player");break;case"unmute":l.muted=!1,SaranyuHlsHTML5Player.Utils.DLOG(t+" to video player");break;case"volumechange":l.volume=e,SaranyuHlsHTML5Player.Utils.DLOG(t+" to video player");break;case"seek":l.currentTime=e,l.play(),SaranyuHlsHTML5Player.Utils.DLOG(t+" to video player")}},_getCurrentTime:function(){var t=this.mediaElement.videoElement;this.options;return t.currentTime},_playcustomPlayList:function(t){SaranyuHlsHTML5Player.Utils.DLOG("Building custom playlist");this.mediaElement.videoElement;this._createAndAppendHLStoPlayer(t),this._videoPlayerControls("play")},_isSupportedMSE:function(){return window.MediaSource=window.MediaSource||window.WebKitMediaSource,window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')},_checkHLS:function(){return!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i))}};